@import '../../style/index.less';

@anchor-prefix-cls: ~"@{one-prefix}-anchor";

.anchor-link-interact-style() {
    color: @dls-anchor-indicator-color;
    text-decoration: none;
    > a {
        color: inherit;
        text-decoration: inherit;
    }
    &:hover {
        color: @dls-anchor-indicator-color-hover;
    }
    &:active {
        color: @dls-anchor-indicator-color-active;
    }
    &:focus {
        color: @dls-anchor-indicator-color-focus;
    }
}

.anchor-link-not-active-interact-style {
    color: @dls-link-font-color-normal;
    text-decoration: none;
    &:hover {
        color: @dls-link-font-color-normal-hover;
    }
    &:active {
        color: @dls-link-font-color-normal-active;
    }
    &:focus {
        color: @dls-link-font-color-normal-focus;
    }
}

.@{anchor-prefix-cls} {
    display: inline-block;
    border-left: @dls-anchor-track-width solid @dls-anchor-track-color;
    font-size: @dls-link-font-size-s;
    position: relative;
    &-wrapper {
        --@{anchor-prefix-cls}-padding-left: @dls-anchor-padding-x;
    }
    &-link {
        &:before {
            content: "";
            position: absolute;
            left: 0;
            height: inherit;
            width: 100%;
            z-index: -1;
            transition-property: background-color;
            transition-duration: 0.2s;
        }
        &-title {
            padding-left: var(~"--@{anchor-prefix-cls}-padding-left");
            height: inherit;
            display: block;
        }
        cursor: pointer;
        &-title-not-active {
            .anchor-link-not-active-interact-style();
        }
    }
    &-link-without-children,
    &-link-has-children > &-link-title {
        margin-bottom: @dls-anchor-item-spacing;
        height: @dls-link-font-size-s * @dls-line-height-2;
        line-height: @dls-link-font-size-s * @dls-line-height-2;
    }
    &-link-has-children {
        >.@{anchor-prefix-cls}-link-title {
            margin-bottom: @dls-anchor-item-spacing;
        }
        .@{anchor-prefix-cls}-link-title ~ .@{anchor-prefix-cls}-link {
            .@{anchor-prefix-cls}-link-title {
                padding-left: calc(@dls-anchor-level-indent + var(~"--@{anchor-prefix-cls}-padding-left"));
            }
            .@{anchor-prefix-cls}-link-title-active {
                .anchor-link-interact-style();
            }
        }
    }
    &-link-active&-link-without-children {
        .anchor-link-interact-style();
        .@{anchor-prefix-cls}-link-title-active {
            &:before {
                content: '';
                position: absolute;
                left: -1px;
                width: 2px;
                height: inherit;
                box-sizing: border-box;
                background-color: @dls-anchor-indicator-color;
            }
            &:hover {
                &:before {
                    background-color: @dls-anchor-indicator-color-hover;
                }
            }
            &:active {
                &:before {
                    background-color: @dls-anchor-indicator-color-active;
                }
            }
            &:focus {
                &:before {
                    background-color: @dls-anchor-indicator-color-focus;
                }
            }
        }
    }
    &-first-level&-link-active&-link-has-children {
        > .@{anchor-prefix-cls}-link-title {
            .anchor-link-interact-style();
            &:before {
                content: '';
                position: absolute;
                left: -1px;
                width: 2px;
                height: inherit;
                box-sizing: border-box;
                background-color: @dls-anchor-indicator-color;
            }
            &:hover {
                &:before {
                    background-color: @dls-anchor-indicator-color-hover;
                }
            }
            &:active {
                &:before {
                    background-color: @dls-anchor-indicator-color-active;
                }
            }
            &:focus {
                &:before {
                    background-color: @dls-anchor-indicator-color-focus;
                }
            }
        }
    }
}

.@{anchor-prefix-cls}-medium {
    font-size: @dls-link-font-size-m;
    .@{anchor-prefix-cls}-link-without-children {
        height: @dls-link-font-size-m * @dls-line-height-2;
        line-height: @dls-link-font-size-m * @dls-line-height-2;
    }
}

.@{anchor-prefix-cls}-small {
    font-size: @dls-link-font-size-s;
    .@{anchor-prefix-cls}-link-without-children {
        height: @dls-link-font-size-s * @dls-line-height-2;
        line-height: @dls-link-font-size-s * @dls-line-height-2;
    }
}

.@{anchor-prefix-cls}-wrapper-inline {
    --@{anchor-prefix-cls}-padding-left: 0px;
    .@{anchor-prefix-cls} {
        border-left: none;
        .@{anchor-prefix-cls}-link-title-active {
            &::before {
                display: none;
            }
        }
    }
}