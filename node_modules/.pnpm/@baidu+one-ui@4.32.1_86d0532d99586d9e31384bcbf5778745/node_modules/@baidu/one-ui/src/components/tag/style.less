@import '../../style/index.less';
@import '../../components/input/style.less';
@import '../../components/tooltip/style.less';


@tag-prefix-cls: ~"@{one-prefix}-tag";

.tag-size(@size, @height, @border-radius, @font-size) {
    .@{tag-prefix-cls}-@{size} {
        height: @height;
        line-height: @height;
        border-radius: @border-radius;
        font-size: @font-size;
    }
}

.tag-color-normal(@color, @border-color, @background-color) {
    color: @color;
    border: 1px solid multiply(#fff, @border-color);
    background: multiply(#fff, @background-color);
}

.tag-color-interaction(
    @dls-tag-font-color,
    @dls-tag-border-color,
    @dls-tag-border-color-focus,
    @dls-tag-background-color,
    @dls-tag-background-color-hover,
    @dls-tag-background-color-focus,
    @dls-tag-background-color-active
) {
    .tag-color-normal(@dls-tag-font-color, @dls-tag-border-color, @dls-tag-background-color);
    &:hover {
        .tag-color-normal(@dls-tag-font-color, @dls-tag-border-color,  @dls-tag-background-color-hover);
    }
    &.focus-visible {
        .tag-color-normal(@dls-tag-font-color, @dls-tag-border-color-focus,  @dls-tag-background-color-focus);
        // box-shadow: @dls-tag-shadow-focus;
    }
    &:active {
        .tag-color-normal(@dls-tag-font-color, @dls-tag-border-color,  @dls-tag-background-color-active);
    }
}
.tag-color-interaction-normal(
    @dls-tag-font-color,
    @dls-tag-border-color,
    @dls-tag-background-color
) {
    .tag-color-normal(@dls-tag-font-color, @dls-tag-border-color, @dls-tag-background-color);
}

.@{tag-prefix-cls} {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    padding: 0 @dls-tag-padding;
    &-text {
        display: inline-flex;
        justify-content: center;
        align-items: center;
    }
    &-checkable {
        cursor: pointer;
        .tag-color-interaction(
            @dls-tag-color,
            fade(@dls-tag-color, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-hover)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-active)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-active))
        );
    }
    .tag-color-interaction-normal(
        @dls-tag-color,
        fade(@dls-tag-color, percentage(@dls-tag-border-opacity)),
        fade(@dls-tag-color, percentage(@dls-tag-background-opacity))
    );
    &-disabled {
        cursor: not-allowed;
        .@{tag-prefix-cls}-close-icon {
            cursor: not-allowed;
        }
        .tag-color-interaction(
            fade(@dls-tag-color, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-border-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-border-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color, percentage(@dls-tag-background-opacity-disabled))
        );
    }
    &-inverse {
        .tag-color-interaction-normal(
            @dls-tag-font-color-selected,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-selected)),
        );
    }
    &-checkable&-inverse {
        .tag-color-interaction(
            @dls-tag-font-color-selected,
            transparent,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-hover)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-active)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-active))
        );
    }
    &-inverse&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-font-color-selected, percentage(@dls-tag-font-opacity-selected-disabled)),
            transparent,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-selected-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-selected-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-selected-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-selected-disabled))
        );
    }
    &-success {
        .tag-color-interaction-normal(
            @dls-tag-color-success,
            fade(@dls-tag-color-success, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity))
        );
    }
    &-checkable&-success {
        .tag-color-interaction(
            @dls-tag-color-success,
            fade(@dls-tag-color-success, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-success, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-hover)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-active)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-active))
        );
    }
    &-warning {
        .tag-color-interaction-normal(
            @dls-tag-color-warning,
            fade(@dls-tag-color-warning, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity))
        );
    }
    &-checkable&-warning {
        .tag-color-interaction(
            @dls-tag-color-warning,
            fade(@dls-tag-color-warning, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-hover)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-active)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-active))
        );
    }
    &-error {
        .tag-color-interaction-normal(
            @dls-tag-color-error,
            fade(@dls-tag-color-error, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity))
        );
    }
    &-checkable&-error {
        .tag-color-interaction(
            @dls-tag-color-error,
            fade(@dls-tag-color-error, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-error, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-hover)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-active)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-active))
        );
    }
    &-info {
        .tag-color-interaction-normal(
            @dls-tag-color-info,
            fade(@dls-tag-color-info, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity))
        );
    }
    &-checkable&-info {
        .tag-color-interaction(
            @dls-tag-color-info,
            fade(@dls-tag-color-info, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-info, percentage(@dls-tag-border-opacity)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-hover)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-active)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-active))
        );
    }
    &-success&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-color-success, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-disabled))
        );
    }
    &-warning&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-color-warning, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-disabled))
        );
    }
    &-error&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-color-error, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-disabled))
        );
    }
    &-info&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-color-info, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-font-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-disabled))
        );
    }
    &-success&-inverse {
        .tag-color-interaction-normal(
            @dls-tag-font-color-reverse,
            transparent,
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse))
        );
    }
    &-warning&-inverse {
        .tag-color-interaction-normal(
            @dls-tag-font-color-reverse,
            transparent,
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse))
        );
    }
    &-error&-inverse {
        .tag-color-interaction-normal(
            @dls-tag-font-color-reverse,
            transparent,
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse))
        );
    }
    &-info&-inverse {
        .tag-color-interaction-normal(
            @dls-tag-font-color-reverse,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse))
        );
    }
    &-checkable&-success&-inverse {
        .tag-color-interaction(
            @dls-tag-font-color-reverse,
            transparent,
            transparent,
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-hover)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-active)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-active))
        );
    }
    &-checkable&-warning&-inverse {
        .tag-color-interaction(
            @dls-tag-font-color-reverse,
            transparent,
            transparent,
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-hover)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-active)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-active))
        );
    }
    &-checkable&-error&-inverse {
        .tag-color-interaction(
            @dls-tag-font-color-reverse,
            transparent,
            transparent,
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-hover)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-active)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-active))
        );
    }
    &-checkable&-info&-inverse {
        .tag-color-interaction(
            @dls-tag-font-color-reverse,
            transparent,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-hover)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-active)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-active))
        );
    }
    &-success&-inverse&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-font-color-reverse, percentage(@dls-tag-font-opacity-reverse-disabled)),
            transparent,
            transparent,
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-success, percentage(@dls-tag-background-opacity-reverse-disabled))
        );
    }
    &-warning&-inverse&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-font-color-reverse, percentage(@dls-tag-font-opacity-reverse-disabled)),
            transparent,
            transparent,
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-warning, percentage(@dls-tag-background-opacity-reverse-disabled))
        );
    }
    &-error&-inverse&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-font-color-reverse, percentage(@dls-tag-font-opacity-reverse-disabled)),
            transparent,
            transparent,
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-error, percentage(@dls-tag-background-opacity-reverse-disabled))
        );
    }
    &-info&-inverse&-disabled {
        .tag-color-interaction(
            fade(@dls-tag-font-color-reverse, percentage(@dls-tag-font-opacity-reverse-disabled)),
            transparent,
            transparent,
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-disabled)),
            fade(@dls-tag-color-info, percentage(@dls-tag-background-opacity-reverse-disabled))
        );
    }

    margin: @dls-tag-list-spacing;
    white-space: nowrap;
    position: relative;
    &-close-icon {
        cursor: pointer;
        margin-left: @dls-tag-padding;
        display: inline-block;
    }
    &-has-color {
        border-color: transparent;
        &,
        a,
        a:hover
        .@{tag-prefix-cls}-close-icon,
        .@{tag-prefix-cls}-close-icon:hover {
            color: @dls-tag-font-color-reverse !important;
            border: 1px solid transparent !important;
        }
    }
    @colors: pink, red, orange, yellow, cyan, green, blue, purple;

    // 基本原色的定义
    .make-color-classes(@i: length(@colors)) when (@i > 0) {
        .make-color-classes(@i - 1);
        @color: extract(@colors, @i);
        // 文字状态
        @lightFontColor: dls-shade(@color, 6);
        // 背景色的四种状态
        @lightBackgroundColor: dls-shade(@color, 1);
        @lightBackgroundColorHover: dls-shade(@color, 2);
        @lightBackgroundColorFocus: @lightBackgroundColorHover;
        @lightBackgroundColorActive: dls-shade(@color, 3);
        // 边框状态
        @lightBorderColor: dls-shade(@color, 4);
        // 禁用色
        @lightFontDisabledColor: @lightBackgroundColorActive;
        @lightFontDisbaledBorderColor: @lightBackgroundColorHover;
        @lightFontDisabledBackgroundColor: @lightBackgroundColor;
        @darkColor: dls-shade(@color, 6);
        &-@{color} {
            .tag-color-interaction(
                @lightFontColor,
                @lightBorderColor,
                @dls-color-brand-6,
                @lightBackgroundColor,
                @lightBackgroundColorHover,
                @lightBackgroundColorFocus,
                @lightBackgroundColorActive
            );
        }
        &-@{color}.@{tag-prefix-cls}-disabled {
            .tag-color-interaction(
                @lightFontDisabledColor,
                @lightFontDisbaledBorderColor,
                @lightFontDisbaledBorderColor,
                @lightFontDisabledBackgroundColor,
                @lightFontDisabledBackgroundColor,
                @lightFontDisabledBackgroundColor,
                @lightFontDisabledBackgroundColor
            );
        }
        // 背景色的四种状态
        @darkBackgroundColor: dls-shade(@color, 6);
        @darkBackgroundColorHover: dls-shade(@color, 5);
        @darkBackgroundColorFocus: @darkBackgroundColorHover;
        @darkBackgroundColorActive: dls-shade(@color, 7);
        // 禁用色
        @darkFontDisabledBackgroundColor: dls-shade(@color, 2);

        &-@{color}-inverse {
            .tag-color-interaction(
                @dls-tag-font-color-reverse,
                transparent,
                @dls-color-brand-6,
                @darkBackgroundColor,
                @darkBackgroundColorHover,
                @darkBackgroundColorFocus,
                @darkBackgroundColorActive
            );
        }
        &-@{color}-inverse.@{tag-prefix-cls}-disabled {
            .tag-color-interaction(
                @dls-tag-font-color-reverse,
                transparent,
                transparent,
                @darkFontDisabledBackgroundColor,
                @darkFontDisabledBackgroundColor,
                @darkFontDisabledBackgroundColor,
                @darkFontDisabledBackgroundColor
            );
        }
    }
    .make-color-classes();
    &-group-wrapper {
        .@{tag-prefix-cls}-add-tag {
            cursor: pointer;
        }
    }
}

.tag-size(medium, @dls-tag-height-m, @dls-tag-border-radius-m, @dls-tag-font-size-m);
.tag-size(small, @dls-tag-height-s, @dls-tag-border-radius-s, @dls-tag-font-size-s);

.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-disabled,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-disabled.@{tag-prefix-cls}-success,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-disabled.@{tag-prefix-cls}-info,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-disabled.@{tag-prefix-cls}-error,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-disabled.@{tag-prefix-cls}-warning,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-checkable.@{tag-prefix-cls}-success,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-checkable.@{tag-prefix-cls}-info,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-checkable.@{tag-prefix-cls}-error,
.@{tag-prefix-cls}-no-bordered.@{tag-prefix-cls}-checkable.@{tag-prefix-cls}-warning,
.@{tag-prefix-cls}-no-bordered {
    border: 1px solid transparent;
    &:hover, &:active, &.focus-visible {
        border: 1px solid transparent;
    }
}

.@{tag-prefix-cls}-group-wrapper {
    display: inline-flex;
    align-items: center;
}