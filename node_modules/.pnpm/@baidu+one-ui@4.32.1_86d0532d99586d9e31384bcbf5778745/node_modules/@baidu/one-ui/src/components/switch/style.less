@import '../../style/index.less';

// 开关尺寸分了small、medium、larget。
// 变量名对应的后缀是xs、s、m
@switch-prefix-cls: ~"@{one-prefix}-switch";
@loading-prefix-cls: ~"@{one-prefix}-loading";

.switch-size(
    @size,
    @switch-width,
    @switch-height,
    @thumb-size,
    @padding-x
) {
    .@{switch-prefix-cls}-@{size} {
        height: @switch-height;
        width: @switch-width;
        border-radius: (@switch-height / 2);
        padding: 0 @padding-x;
        .@{switch-prefix-cls}-thumb {
            height: @thumb-size;
            width: @thumb-size;
        }
    }
    .@{switch-prefix-cls}-checked.@{switch-prefix-cls}-@{size} {
        .@{switch-prefix-cls}-thumb {
            transform: translateX(@switch-width - 2 * @padding-x - @thumb-size);
        }
    }
}

.switch-size(xsmall, @dls-switch-width-xs, @dls-switch-height-xs, @dls-switch-thumb-size-xs, @dls-switch-padding-xs);
.switch-size(small, @dls-switch-width-s, @dls-switch-height-s, @dls-switch-thumb-size-s, @dls-switch-padding-s);
.switch-size(medium, @dls-switch-width-m, @dls-switch-height-m, @dls-switch-thumb-size-m, @dls-switch-padding-m);

.@{switch-prefix-cls} {
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    position: relative;
    cursor: pointer;
    outline: none;
    box-sizing: border-box;
    border: none;
    background-color: @dls-switch-track-color-off;
    &:hover {
        background-color: @dls-switch-track-color-off-hover;
    }
    &.focus-visible {
        background-color: @dls-switch-track-color-off-focus;
        box-shadow: @dls-switch-shadow-off-focus;
    }
    &:active {
        background-color: @dls-switch-track-color-off-active;
    }
    &-thumb {
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition-property: transform;
        transition-duration: .2s;
        background-color: @dls-switch-thumb-color-off;
        display: inline-flex;
        align-items: center;
        &:hover {
          background-color: @dls-switch-thumb-color-off-hover;
        }
        &.focus-visible {
            background-color: @dls-switch-thumb-color-off-focus;
        }
        &:active {
            background-color: @dls-switch-thumb-color-off-active;
        }
    }
    &-loading-icon {
        .@{loading-prefix-cls} {
            padding: 0;
        }
        .@{loading-prefix-cls}-loading-icon {
            position: absolute;
            left: @dls-padding-unit;
            transform: translate(0, -50%);
            top: 50%;
            color: @dls-switch-track-color-off !important;
        }
    }
}

.@{switch-prefix-cls}-checked {
    background-color: @dls-switch-track-color-on;
    &:hover {
        background-color: @dls-switch-track-color-on-hover;
    }
    &.focus-visible {
        background-color: @dls-switch-track-color-on-focus;
        box-shadow: @dls-switch-shadow-on-focus;
    }
    &:active {
        background-color: @dls-switch-track-color-on-active;
    }
    .@{switch-prefix-cls}-thumb {
        background-color: @dls-switch-thumb-color-on;
        &:hover {
          background-color: @dls-switch-thumb-color-on-hover;
        }
        &.focus-visible {
            background-color: @dls-switch-thumb-color-on-focus;
        }
        &:active {
            background-color: @dls-switch-thumb-color-on-active;
        }
    }
    .@{switch-prefix-cls}-loading-icon {
        .@{loading-prefix-cls}-loading-icon  {
            left: 50%;
            transform: translate(-50%, -50%);
            color : @dls-switch-track-color-on !important;
        }
    }
}

.@{switch-prefix-cls}-disabled {
    cursor: not-allowed;
}

.@{switch-prefix-cls}.@{switch-prefix-cls}-disabled {
    background-color: @dls-switch-track-color-off-disabled;
    &:hover, &.focus-visible, &:active {
        background-color: @dls-switch-track-color-off-disabled;
    }
    .@{switch-prefix-cls}-thumb {
        background-color: @dls-switch-thumb-color-off-disabled;
        &:hover, &.focus-visible, &:active {
            background-color: @dls-switch-thumb-color-off-disabled;
        }
    }
}

.@{switch-prefix-cls}-checked.@{switch-prefix-cls}-disabled {
    background-color: @dls-switch-track-color-on-disabled;
    &:hover, &.focus-visible, &:active {
        background-color: @dls-switch-track-color-on-disabled;
    }
    .@{switch-prefix-cls}-thumb {
        background-color: @dls-switch-thumb-color-on-disabled;
        &:hover, &.focus-visible, &:active {
            background-color: @dls-switch-thumb-color-on-disabled;
        }
    }
}

.@{switch-prefix-cls}-xsmall {
    .@{switch-prefix-cls}-loading-icon {
        .@{loading-prefix-cls}-loading-icon {
            height: 6px;
            width: auto;
        }
    }
}

.@{switch-prefix-cls}-small {
    .@{switch-prefix-cls}-loading-icon {
        .@{loading-prefix-cls}-loading-icon {
            height: 8px;
            width: auto;
        }
    }
}

.@{switch-prefix-cls}-medium {
    .@{switch-prefix-cls}-loading-icon {
        .@{loading-prefix-cls}-loading-icon {
            height: 10px;
            width: auto;
        }
    }
}
