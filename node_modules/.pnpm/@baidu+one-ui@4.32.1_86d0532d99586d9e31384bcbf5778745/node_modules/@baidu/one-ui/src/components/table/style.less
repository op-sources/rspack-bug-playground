@import '../../style/index.less';
@import '../../components/dropdown/style.less';
@import '../../components/button/style.less';
@import '../../components/pagination/style.less';
@import '../../components/checkbox/style.less';
@import '../../components/radio/style.less';
@import '../../components/menu/style.less';

@table-prefix-cls: ~"@{one-prefix}-table";
@table-filter-dropdown-menu: ~"@{one-prefix}-dropdown-menu";
@table-checkbox-cls: ~"@{one-prefix}-checkbox";
@table-radio-cls: ~"@{one-prefix}-radio";
@table-loading-cls: ~"@{one-prefix}-loading";

.@{table-prefix-cls}-wrapper {
    .clearfix();
    .@{table-loading-cls}-icon-element {
        z-index: 11 !important;
    }
    .@{table-loading-cls}-container {
        &::after {
            z-index: 10;
        }
    }
}
.@{table-prefix-cls}-wrapper-no-header {
    .@{table-prefix-cls} {
        &-tbody > tr:first-child > td {
            border-top: @table-body-border;
        }
    }
}
.@{table-prefix-cls}-medium {
    font-size: @dls-table-font-size-m;
    border-radius: @dls-table-border-radius-m @dls-table-border-radius-m 0 0;
}
.@{table-prefix-cls}-small {
    font-size: @dls-table-font-size-s;
    border-radius: @dls-table-border-radius-s @dls-table-border-radius-s 0 0;
}
.@{table-prefix-cls} {
    width: 100%;
    // overflow: hidden;
    position: relative;
    &-head-cell {
        position: relative;
    }
    &-content {
        overflow: auto;
    }
    colgroup {
        col {
            min-width: @dls-table-column-min-width;
        }
    }
    .@{table-checkbox-cls}-wrapper {
        font-size: inherit;
    }
    &-body {
        transition: opacity 0.3s ease;
    }
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        text-align: left;
        table-layout: fixed;
    }
    &-drag-line {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 1px;
        height: 100%;
        background-color: @dls-table-border-color-dragging;
        display: none;
        pointer-events: none;
        z-index: 7;
    }
    &-drag-line-show {
        display: block;
    }
    &-thead > tr > th {
        font-weight: @dls-table-header-font-weight;
        transition: background .3s ease;
        text-align: left;
        color: @dls-table-header-font-color;
        padding: @dls-table-header-padding-y @dls-table-header-padding-x;
        word-break: break-all;
        box-sizing: border-box;
        &[colspan] {
            text-align: center;
        }
    }
    &-variant-normal &-thead > tr,
    &-variant-normal &-thead > tr > th {
        background-color: @dls-table-header-background-color;
        &:hover {
            background-color: @dls-table-header-background-color-hover;
        }
    }
    &-variant-normal &-thead > tr > th {
        border-bottom: @table-header-border;
    }
    &-thead > tr:first-child > th {
        // border-top: @table-header-border;
        border-top: 0;
    }
    &-tbody > tr > td {
        transition: all .3s;
        padding: @dls-table-cell-padding-y @dls-table-cell-padding-x;
        word-break: break-all;
        box-sizing: border-box;
    }
    &-variant-normal &-tbody > tr > td {
        border-bottom: @table-body-border;
    }
    &-thead > tr {
        transition: all .3s;
        color: @dls-table-cell-font-color;
        &.@{table-prefix-cls}-row-placeholder > th {
            padding: 0!important;
            border: 0;
            text-align: left;
        }
    }
    &-variant-normal &-thead > tr {
        &.@{table-prefix-cls}-row-hover,
        &:hover {
            & > td {
                background: @dls-table-header-background-color-hover;
            }
            &.@{table-prefix-cls}-row-placeholder th {
                background-color: @dls-table-cell-background-color;
            }
        }
    }
    &-tbody > tr {
        transition: all .3s;
        color: @dls-table-cell-font-color;
        &.@{table-prefix-cls}-row-placeholder td {
            padding: 0!important;
        }
    }
    &-variant-normal &-tbody > tr {
        background-color: @dls-table-cell-background-color;
        &.@{table-prefix-cls}-row-hover,
        &:hover {
            background: @table-row-hover-bg;
            & > td {
                background: @table-row-hover-bg;
            }
            &.@{table-prefix-cls}-row-placeholder td {
                background-color: @dls-table-cell-background-color;
            }
        }
    }
    &-thead > tr:hover {
        background: transparent;
    }
    &-tbody > tr.@{table-prefix-cls}-row-selected {
        background: @table-row-hover-bg;
    }
    &-thead > tr > th.@{table-prefix-cls}-selection-column-custom {
        padding-left: @dls-table-header-padding-x;
        padding-right: @dls-table-header-padding-x;
    }
    &-thead > tr > th.@{table-prefix-cls}-selection-column,
    &-tbody > tr > td.@{table-prefix-cls}-selection-column {
        text-align: left;
        // width: @table-selection-column-width;
        // min-width: @table-selection-column-width;
        padding-left: @dls-table-action-spacing;
        padding-right: @dls-table-action-spacing;
        .@{table-radio-cls}-wrapper {
            margin-right: 0;
        }
    }
    &-expand-icon-th,
    &-row-expand-icon-cell {
        text-align: center;
        min-width: @table-expand-icon-width;
        width: @table-expand-icon-width;
    }
    &-header {
        // background: @table-header-bg;
        overflow: hidden;
        &-bottom {
            position: sticky;
            left: 0;
        }
    }
    &-header table {
        border-radius: @dls-table-border-radius-s @dls-table-border-radius-s 0 0;
    }
    .@{table-prefix-cls}-body > table,
    .@{table-prefix-cls}-fixed-left table,
    .@{table-prefix-cls}-fixed-right table {
        border: 0;
    }
    &.@{table-prefix-cls}-fixed-header {
        .@{table-prefix-cls}-header > table {
            border-bottom: 0;
        }
        .@{table-prefix-cls}-body > table {
            border-top: 0;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }
        .@{table-prefix-cls}-body-inner > table {
            border-top: 0;
        }
    }
    .@{table-prefix-cls}-thead > tr > th.one-table-head-first-cell {
        // border-left: @table-header-border;
        padding-left: @dls-table-padding-x;
        border-left: 0;
    }
    .@{table-prefix-cls}-thead > tr > th:last-child {
        // border-right: @table-header-border;
        padding-right: @dls-table-padding-x;
        // border-right: 0;
    }
    .@{table-prefix-cls}-tbody > tr > td.@{table-prefix-cls}-row-first-cell {
        // border-left: @table-body-border;
        padding-left: @dls-table-padding-x;
        border-left: 0;
    }
    .@{table-prefix-cls}-tbody > tr > td:last-child {
        // border-right: @table-body-border;
        padding-right: @dls-table-padding-x;
        border-right: 0;
    }
    .@{table-prefix-cls}-fixed-left table {
        .@{table-prefix-cls}-thead > tr > th:last-child,
        .@{table-prefix-cls}-tbody > tr > td:last-child {
            border-right: 0;
        }
    }
    .@{table-prefix-cls}-fixed-right table {
        .@{table-prefix-cls}-thead > tr > th:last-child,
        .@{table-prefix-cls}-tbody > tr > td:last-child {
            border-left: 0;
        }
    }
    &-bordered {
        .@{table-prefix-cls}-thead > tr > th {
            border-right: @table-header-border !important;
        }
        .@{table-prefix-cls}-tbody > tr > td {
            border-right: @table-body-border !important;
        }
        .@{table-prefix-cls}-thead > tr > th.one-table-head-first-cell {
            border-left: @table-header-border !important;
        }
        .@{table-prefix-cls}-tbody > tr > td.@{table-prefix-cls}-row-first-cell {
            border-left: @table-body-border !important;
        }
        .@{table-prefix-cls}-thead > tr.@{table-prefix-cls}-row-placeholder > th {
            border: 0 !important;
        }
    }
    &-head-bordered {
        .@{table-prefix-cls}-thead > tr > th:not(.@{table-prefix-cls}-expand-icon-th):not(.@{table-prefix-cls}-selection-column) {
            border-right: @table-header-border !important;
        }
        .@{table-prefix-cls}-thead > tr:first-child > th:last-child {
            border-right: 0 !important;
        }
        .@{table-prefix-cls}-thead > tr:first-child > th:first-child {
            border-left: 0 !important;
        }
        .@{table-prefix-cls}-thead > tr.@{table-prefix-cls}-row-placeholder > th:not(.@{table-prefix-cls}-expand-icon-th):not(.@{table-prefix-cls}-selection-column) {
            border: 0 !important;
        }
    }
    .@{table-prefix-cls}-header + .@{table-prefix-cls}-body > table {
        border-top: 0;
    }
    .@{table-prefix-cls}-header + .@{table-prefix-cls}-body-outer > .@{table-prefix-cls}-body-inner > table {
        border-top: 0;
    }
    &-row-cell-content-wrapper {
        display: flex;
        align-items: center;
    }
    &-pagination {
        margin-top: @dls-table-padding-x;
    }
    &-column-has-sort {
        cursor: pointer;
    }
    &-head-cell:hover &-column-operate-item-autohide,
    &-filter-expanded &-column-operate-item-autohide {
        display: inline-block;
    }
    &-column-head {
        display: inline-flex;
        align-items: center;
    }
    &-with-line-clamp &-column-title,
    &-with-head-line-clamp &-column-title,
    &-with-line-clamp &-row-cell-content {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: var(--one-table-line-clamp);
        overflow: hidden;
    }
    &-with-head-line-clamp &-column-title {
        -webkit-line-clamp: var(--one-table-head-line-clamp);
    }
    &-with-line-clamp &-thead > tr > th,
    &-with-line-clamp &-tbody > tr > td {
        box-sizing: content-box;
        line-height: @dls-line-height-1;
        height: calc(1em * @dls-line-height-1 * var(--one-table-line-clamp));
    }
    &-with-head-line-clamp &-thead > tr > th {
        height: calc(1em * @dls-line-height-1 * var(--one-table-head-line-clamp));
    }
    &-with-line-clamp &-head-row:not(&-head-row-last) &-column-title {
        -webkit-line-clamp: 1;
    }
    &-with-line-clamp &-thead > tr&-head-row:not(&-head-row-last) > th {
        height: calc(1em * @dls-line-height-1);
    }
    &-column-operate {
        margin-left: @dls-table-cell-content-spacing;
        line-height: 1;
        white-space: nowrap;
        &-item {
            display: inline-block;
            margin-right: @table-column-header-icon-right;
            position: relative;
            cursor: pointer;
            &-autohide {
                display: none;
            }
            &:last-child {
                margin-right: 0;
            }
            .@{table-prefix-cls}-sort-icon-set {
                svg {
                    color: @dls-table-header-icon-color;
                }
                &:hover {
                    svg {
                        color: @dls-table-header-icon-color-hover;
                    }
                }
                &:active {
                    svg {
                        color: @dls-table-header-icon-color-active;
                    }
                }
                .@{table-prefix-cls}-sorted-up-icon-active,
                .@{table-prefix-cls}-sorted-down-icon-active {
                    color: @dls-button-background-color-primary;
                }
                &:hover {
                    .@{table-prefix-cls}-sorted-up-icon-active,
                    .@{table-prefix-cls}-sorted-down-icon-active {
                        color: @dls-button-background-color-primary-hover;
                    }
                }
                &:active {
                    .@{table-prefix-cls}-sorted-up-icon-active,
                    .@{table-prefix-cls}-sorted-down-icon-active {
                        color: @dls-button-background-color-primary-active;
                    }
                }
            }
        }
    }
    &-selection {
        position: relative;
        height: 5 * @dls-height-unit;
        line-height: 5 * @dls-height-unit;
        display: inline-block;
        &-select-all-custom {
            font-size: inherit;
        }
        &-menu {
            min-width: @table-checkbox-all-arrow-width;
            margin-top: @dls-padding-unit;
            margin-left: -7 * @dls-padding-unit;
            background: @table-header-bg;
            border-radius: @dls-table-border-radius-s;
            box-shadow: @dls-dropdown-menu-shadow;
        }
        &-down {
            cursor: pointer;
            padding: 0;
            display: inline-block;
            line-height: 1;
            color: @dls-icon-color-aux;
            font-weight: bolder;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: @table-trigger-down-icon-left + 2px;
        }
    }
    &-filter-normal {
        color: @dls-table-header-icon-color;
        &:hover {
            color: @dls-table-header-icon-color-hover;
        }
        &:active {
            color: @dls-table-header-icon-color-active;
        }
    }
    &-filter-selected {
        color: @dls-button-background-color-primary;
        &:hover {
            color: @dls-button-background-color-primary-hover;
        }
        &:active {
            color: @dls-button-background-color-primary-active;
        }
    }
    &-filter-dropdown {
        min-width: @table-filter-dropdown-min-width;
        margin-left: -@dls-table-cell-padding-x;
        background-color: @dls-option-background-color;
        border-radius: @dls-dropdown-menu-border-radius-m;
        box-shadow: @dls-dropdown-menu-shadow;
        .@{table-filter-dropdown-menu} {
            border: 0;
            box-shadow: none;
            .@{table-checkbox-cls}-wrapper {
                font-size: inherit;
            }
            &-without-submenu {
                max-height: @table-filter-dropdown-menu-without-submenu-max-height;
                overflow-x: hidden;
            }
            &-item > label + span {
                padding-right: 0;
            }
            &-sub {
                box-shadow: @dls-dropdown-menu-shadow;
            }
            .@{table-radio-cls} {
                margin-right: @dls-padding-unit;
            }
        }
        .@{table-filter-dropdown-menu}-item {
            overflow: hidden;
        }
        > .@{table-filter-dropdown-menu} > .@{table-filter-dropdown-menu}-item:last-child,
        > .@{table-filter-dropdown-menu} > .@{table-filter-dropdown-menu}-submenu:last-child .@{table-filter-dropdown-menu}-submenu-title {
            border-radius: 0;
        }
        &-with-confirm {
            padding-top: @dls-padding-unit * 2;
            &.@{table-prefix-cls}-filter-dropdown-with-title {
                padding-top: 0;
            }
        }
        &-title {
            padding: @dls-padding-unit * 3 @dls-padding-unit * 4 @dls-padding-unit;
            color: @dls-foreground-color-neutral-weak;
            font-size: @dls-font-size-1;
        }
        &-btns {
            padding: @dls-padding-unit * 4;
        }
        &-link-confirm {
            margin-right: @dls-padding-unit * 4;
        }
    }
    &-row {
        &-expand-icon {
            cursor: pointer;
            display: inline-block;
            text-align: center;
            user-select: none;
            width: @dls-table-icon-size;
            height: @dls-table-icon-size;
        }
        &-spaced {
            visibility: hidden;
            width: 0;
        }
        &[class*="@{table-prefix-cls}-row-level-0"] .@{table-prefix-cls}-selection-column > span {
            display: inline-block;
        }
    }
    &-row&-row-tree-level:not(&-row-level-0) {
        background-color: @dls-table-sub-row-background-color;
        .@{table-prefix-cls}-row-body-cell {
            background-color: @dls-table-sub-row-background-color;
        }
        &:hover {
            background-color: @dls-table-sub-row-background-color-hover;
            .@{table-prefix-cls}-row-body-cell {
                background-color: @dls-table-sub-row-background-color-hover;
            }
        }
    }
    tr&-expanded-row {
        background-color: @dls-table-sub-row-background-color;
        table {
            border: 0 !important;
            width: 100% !important;
        }
        tbody > tr:last-child {
            td {
                border-bottom: 0;
            }
        }
        tbody > tr > td:last-child,
        thead > tr > th:last-child {
            border-right: 0 !important;
        }
        tbody > tr > td:first-child,
        thead > tr > th:first-child {
            border-left: 0 !important;
        }
        thead > tr > th {
            border-top: 0 !important;
        }
        .@{table-prefix-cls}-placeholder {
            border: 0;
        }
        .@{table-prefix-cls}-pagination {
            padding: @table-expanded-row-pagination-padding;
            background: transparent;
            margin-top: 0;
        }
        .@{table-prefix-cls}-tbody > tr {
            background-color: @dls-table-sub-row-background-color;
            &:hover {
                background-color: @dls-table-sub-row-background-color-hover;
            }
        }
    }
    tr&-expanded-row > td {
        padding: 0 !important;
        &:hover {
            background: transparent;
        }
        .@{table-prefix-cls}-content {
            margin-left: 38px;
        }
    }
    tr&-expanded-row > td:first-child {
        display: none;
    }
    &-row-indent {
        padding-left: calc(var(--one-table-cell-indent-level) * @dls-table-icon-size);
    }
    .@{table-prefix-cls}-row-indent + .@{table-prefix-cls}-row-expand-icon {
        margin-right: @dls-table-cell-padding-x;
    }
    &-body-inner {
        height: 100%;
    }
    &-fixed-header > &-content > &-scroll > &-body {
        position: relative;
        background: @table-body-bg;
    }
    &-fixed-header &-body-inner {
        overflow: scroll;
    }
    &-fixed-header &-scroll &-header {
        // overflow: scroll;
        padding-bottom: @table-scroll-header-padding;
        margin-bottom: -@table-scroll-header-padding;
        opacity: 0.9999;
    }
    &-placeholder {
        position: sticky;
        left: 0;
        min-height: @dls-table-body-height-no-data;
        align-items: center;
        display: flex;
        justify-content: center;
        border: 0;
        text-align: center;
        font-size: inherit;
        z-index: 1;
        color: @dls-link-font-color-normal;
    }
    &-footer {
        padding: 2 * @dls-padding-unit 7 * @dls-padding-unit;
        background: @table-footer-bg;
        position: relative;
        border: @table-body-border;
        &:before {
            content: '';
            height: 1px;
            background: @table-footer-bg;
            position: absolute;
            top: -1px;
            width: 100%;
            left: 0;
        }
    }
    &-scroll-container {
        width: @table-scroll-bar-width;
        height: @table-scroll-bar-height;
        overflow-x: auto;
        overflow-y: hidden;
        position: fixed;
        bottom: 0;
        z-index: @table-scroll-bar-zindex;
        .@{table-prefix-cls}-scroll-content {
            width: @table-scroll-bar-outer-width;
            height: @table-scroll-bar-height;
        }
    }
    th.table-cell-child {
        border-top-width: 0;
        // border-left: @table-header-border;
    }
    th.table-cell-child-right {
        border-top-width: 0;
        border-right: @table-header-border;
        // border-left: @table-header-border;
    }
    th.table-cell-parent {
        border-bottom: @table-header-border;
        // border-left: @table-header-border !important;
        border-right: @table-header-border !important;
    }
    &-row-body-cell {
        background-color: @dls-table-cell-background-color;
    }
    &-row-body-cell-sticky-right,
    &-row-body-cell-sticky-left,
    &-head-cell-sticky-right,
    &-head-cell-sticky-left {
        position: -webkit-sticky;
        position: sticky;
        z-index: 1;
    }
    &-row-body-cell-sticky-left-last::after,
    &-head-cell-sticky-left-last::after,
    &-row-body-cell-sticky-right-first::after,
    &-head-cell-sticky-right-first::after {
        position: absolute;
        top: -100%;
        bottom: -1px;
        width: 30px;
        content: "";
        pointer-events: none;
        transition-property: box-shadow;
        transition-duration: .2s;
    }
    &-row-body-cell-sticky-left-last::after,
    &-head-cell-sticky-left-last::after {
        right: 0;
        clip-path: polygon(50% 50%, 150% 50%, 150% 100%, 50% 100%);
        box-shadow: @dls-table-overflow-shadow-left;
    }
    &-row-body-cell-sticky-right-first::after,
    &-head-cell-sticky-right-first::after {
        left: 0;
        clip-path: polygon(-50% 50%, 50% 50%, 50% 100%, -50% 100%);
        box-shadow: @dls-table-overflow-shadow-right;
    }
    &-scroll-position-left {
        .@{table-prefix-cls}-row-body-cell-sticky-left-last::after,
        .@{table-prefix-cls}-head-cell-sticky-left-last::after {
            box-shadow: none;
        }
    }
    &-scroll-position-right {
        .@{table-prefix-cls}-row-body-cell-sticky-right-first::after,
        .@{table-prefix-cls}-head-cell-sticky-right-first::after {
            box-shadow: none;
        }
    }
    &:not(.@{table-prefix-cls}-scroll-position-left) {
        .@{table-prefix-cls}-row-body-cell-sticky-left-last,
        .@{table-prefix-cls}-head-cell-sticky-left-last {
            border-right: 0 transparent !important;
        }
    }
    &-sort-icon-set {
        .@{table-prefix-cls}-sorted-up-icon {
            height: @dls-icon-size-normal;
        }
        .@{table-prefix-cls}-sorted-down-icon {
            position: absolute;
            left: 0;
            height: @dls-icon-size-normal;
        }
    }
    &-sticky-top {
        overflow: visible;
        .@{table-prefix-cls}-content {
            overflow: visible;
        }
        .@{table-prefix-cls}-left-shadow {
            box-shadow: 2px 4px 2px 1px rgba(0, 0, 0, 0.06)
        }
        .@{table-prefix-cls}-right-shadow {
            box-shadow: -2px 4px 2px 1px rgba(0, 0, 0, 0.06)
        }
    }
    &-sticky-top.@{table-prefix-cls}-scroll-position-left {
        .@{table-prefix-cls}-left-shadow {
            box-shadow: none;
        }
    }
    &-sticky-top.@{table-prefix-cls}-scroll-position-right {
        .@{table-prefix-cls}-right-shadow {
            box-shadow: none;
        }
    }
    &-sticky-header {
        position: -webkit-sticky;
        position: sticky;
        z-index: 2;
        padding-bottom: 0;
    }
    > .@{loading-prefix-cls}-nested-loading {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
    }
    &-loading-bar {
        font-size: 0;
        position: sticky;
        z-index: 11;
        left: 0;
        width: 100%;
        pointer-events: none;
        .@{loading-prefix-cls}-bar {
            position: absolute;
        }
    }
    &-loading-backdrop &-sticky-header,
    &-loading-backdrop &-loading-tip {
        z-index: 11;
    }
    &-loading-backdrop &-sticky-header::after,
    &-loading-backdrop &-main::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 10;
        background-color: fade(@dls-background-color-base-1, 50%);
    }
}

.@{table-filter-dropdown-menu}-submenu {
    .@{table-checkbox-cls}-wrapper {
        font-size: inherit;
    }
}

.@{table-prefix-cls}-cell-drag-cursor {
    position: absolute;
    right: -10px;
    display: inline-block;
    width: 20px;
    height: 100%;
    top: 0;
    cursor: col-resize;
}

.@{table-prefix-cls} {
    .@{table-prefix-cls}-thead > tr > th:last-child {
        .@{table-prefix-cls}-cell-drag-cursor {
            right: 0;
        }
    }
    .@{table-prefix-cls}-sort-icon-set {
        position: relative;
        line-height: 1;
    }
}

.@{table-prefix-cls}-wrapper-loose {
    .@{table-prefix-cls}-thead > tr > th {
        padding: @dls-table-header-padding-y-loose @dls-table-header-padding-x;
    }
    .@{table-prefix-cls}-tbody > tr > td {
        padding: @dls-table-cell-padding-y-loose @dls-table-cell-padding-x;
    }
}

.@{table-prefix-cls}-wrapper-compact {
    .@{table-prefix-cls}-thead > tr > th {
        padding: @dls-table-header-padding-y-compact @dls-table-header-padding-x;
    }
    .@{table-prefix-cls}-tbody > tr > td {
        padding: @dls-table-cell-padding-y-compact @dls-table-cell-padding-x;
    }
}

.@{table-prefix-cls}-wrapper-no-columns {
    .@{table-prefix-cls}-loading-holder-mask {
        .@{table-prefix-cls}-loading-icon {
            top: 30%;
        }
    }
    .@{table-prefix-cls}-no-columns {
        width: 100%;
        min-height: @dls-table-body-height-no-data;
    }
}
