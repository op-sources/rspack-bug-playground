@import '../../style/index.less';
@import '../../components/checkbox/style.less';
@import '../../components/input/style.less';

@cascader-pane-prefix-cls: ~"@{one-prefix}-cascader-pane";
@loading-prefix-cls: ~"@{one-prefix}-loading";

.cascaderPane-size(
    @size,
    @font-size,
    @menu-height,
    @option-padding-x,
    @option-height,
    @border-radius
) {
    .@{cascader-pane-prefix-cls}-@{size} {
        .@{cascader-pane-prefix-cls}-menus {
            font-size: @font-size;
            border-radius: @border-radius;
            .@{cascader-pane-prefix-cls}-menu-header,
            .@{cascader-pane-prefix-cls}-menu-footer,
            .@{cascader-pane-prefix-cls}-header,
            .@{cascader-pane-prefix-cls}-footer {
                padding: @dls-option-group-padding-y * 2 @option-padding-x;
            }
        }
        .@{cascader-pane-prefix-cls}-menu,
        .@{cascader-pane-prefix-cls}-menus-search-box-container {
            height: @menu-height;
        }
        .@{cascader-pane-prefix-cls}-menu-item {
            padding: 0 @option-padding-x;
            line-height: @option-height;
            height: @option-height;
            &.@{cascader-pane-prefix-cls}-menu-item-unselectable {
                &,
                &:hover {
                    background-color: transparent;
                    cursor: default;
                }
            }
        }
        .@{cascader-pane-prefix-cls}-menu-item-group {
            &-title {
                line-height: @option-height;
                height: @option-height;
                padding: 0 @option-padding-x;
                display: flex;
            }
            &-title.@{cascader-pane-prefix-cls}-menu-item-unselectable {
                &,
                &:hover {
                    color: @dls-option-group-label-font-color;
                }
            }
            .@{cascader-pane-prefix-cls}-menu-item {
                padding-left: @option-padding-x * 2;
            }
        }
    }
}

.@{cascader-pane-prefix-cls} {
    &-menus {
        background: @dls-option-background-color;
        display: inline-block;
        border-radius: @dls-dropdown-menu-border-radius-l;
        box-shadow: @dls-dropdown-menu-shadow;
        overflow-y: auto;
        white-space: nowrap;
        ul,
        ol {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        &-empty,
        &-hidden {
            display: none;
        }
        &-container {
            display: flex;
        }
    }
    &-menus &-menu {
        display: inline-flex;
        flex-direction: column;
        min-width: @dls-cascader-column-min-width;
        flex: 1;
        list-style: none;
        margin: 0;
        border-left: 1px solid @dls-line-color-1;
        overflow: auto;
        -ms-overflow-style: -ms-autohiding-scrollbar;
        &:first-child {
            border-left: none;
        }
        &:only-child {
            width: 100%;
        }
    }
    &-menu-item {
        cursor: pointer;
        transition: all 0.3s;
        color: @dls-option-font-color;
        background: @dls-option-background-color;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        display: flex;
        align-items: center;
        flex-shrink: 0;
        align-items: center;
        &:hover {
            background: @dls-option-background-color-hover;
            color: @dls-option-font-color-hover;
        }
        &:active {
            background: @dls-option-background-color-active;
            color: @dls-option-font-color-active;
        }
        &.focus-visible {
            background: @dls-option-background-color-focus;
            color: @dls-option-font-color-focus;
        }
        &-disabled {
            cursor: not-allowed;
            color: @dls-option-font-color-disabled;
            &:hover, &:active {
                color: @dls-option-font-color-disabled;
                background-color: @dls-option-background-color;
            }
            .@{cascader-pane-prefix-cls}-menu-item-label {
                color: @dls-option-font-color-disabled;
            }
            .@{cascader-pane-prefix-cls}-menu-item-icon {
                > svg {
                    color: @dls-option-icon-color-aux-disabled !important;
                }
            }
        }
        &-loading-icon {
            padding: 0;
            position: absolute;
            right: @dls-option-label-spacing-before;
            .@{loading-prefix-cls}-visible {
                padding: 0;
            }
        }
        &-expand&-active:not(&-disabled) {
            background-color: @dls-option-background-color-selected-parent;
            &:hover, &:active, &.focus-visible {
                background-color: @dls-option-background-color-selected-parent;
            }
        }
        &-active:not(&-disabled) {
            color: @dls-option-font-color-active;
            background: @dls-option-background-color;
            &:hover {
                background: @dls-option-background-color-hover;
                color: @dls-option-font-color-active;
            }
            &:active {
                background: @dls-option-background-color-active;
                color: @dls-option-font-color-active;
            }
            &.focus-visible {
                background: @dls-option-background-color-focus;
                color: @dls-option-font-color-active;
            }
        }
        &-selected:not(&-disabled) {
            color: @dls-option-font-color-selected;
            background: @dls-option-background-color;
            &:hover {
                background: @dls-option-background-color-hover;
                color: @dls-option-font-color-selected-hover;
            }
            &:active {
                background: @dls-option-background-color-active;
                color: @dls-option-font-color-selected-active;
            }
            &.focus-visible {
                background: @dls-option-background-color-focus;
                color: @dls-option-font-color-selected-focus;
            }
        }
        &-checkbox,
        &-label {
            overflow: hidden;
            text-overflow: ellipsis;
        }
        &-label {
            flex: 1;
        }
        &-expand {
            position: relative;
        }
        &-expand &-expand-icon {
            cursor: pointer;
            margin-left: @dls-option-label-spacing-after;
            margin-right: -@dls-option-label-spacing-after;
            width: @cascader-item-expand-icon-width;
            &-toggle {
                margin-right: @dls-padding-unit;
                margin-left: 0;
            }
            > svg {
                color: @dls-option-icon-color-aux;
            }
        }
        &-group &-expand &-expand-icon-toggle {
            margin-left: -@cascader-item-expand-icon-width - @dls-padding-unit;
        }
        &-expanded &-expand-arrow {
            transform: rotate(90deg);
        }
        & &-keyword {
            color: @dls-option-font-color-highlighted;
        }
        &-icon {
            margin-left: @dls-option-label-spacing-after;
        }
    }
    &-multiple &-menu-item-selected:not(&-menu-item-disabled),
    &-multiple &-menu-item-active:not(&-menu-item-disabled) {
        &,
        &:hover,
        &:active,
        &.focus-visible {
            color: @dls-option-font-color;
        }
    }
    &-show-search {
        display: inline-block;
        .@{cascader-pane-prefix-cls}-menus-container {
            display: flex;
            position: relative;
            margin-top: 1px;
            .@{cascader-pane-prefix-cls}-menu {
                flex: 1;
                min-width: auto;
            }
            .@{cascader-pane-prefix-cls}-menu-fixed-width {
                flex: none;
            }
        }
    }
    &-menus-search-box {
        display: flex;
        width: 100%;
        &-container {
            width: 100%;
            position: relative;
            overflow-y: auto;
            padding: @dls-option-group-padding-y 0;
            .@{cascader-pane-prefix-cls}-menu-item {
                &-separator {
                    margin: 0 @dls-option-label-spacing-before;
                    font-size: @dls-font-size-0;
                }
                &-highlight {
                    color: @dls-option-font-color-highlighted;
                }
            }
        }
    }
    &-empty {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    &-empty-item {
        cursor: not-allowed;
        color: @dls-option-font-color-disabled;
    }
    &-header,
    &-footer,
    &-menu-header,
    &-menu-footer {
        color: @dls-option-group-label-font-color;
    }
    &-header {
        border-bottom: 1px solid @dls-option-group-separator-color;
    }
    &-footer,
    &-menu-footer {
        border-top: 1px solid @dls-option-group-separator-color;
    }
    &-menu-footer {
        position: sticky;
        bottom: 0;
        margin-top: auto;
        background-color: @dls-background-color-base-1;
    }
}

.cascaderPane-size(
    xsmall,
    @dls-option-font-size-xs,
    @dls-dropdown-menu-max-height-xs,
    @dls-option-padding-xs,
    @dls-option-height-xs,
    @dls-dropdown-menu-border-radius-xs
);
.cascaderPane-size(
    small,
    @dls-option-font-size-s,
    @dls-dropdown-menu-max-height-s,
    @dls-option-padding-s,
    @dls-option-height-s,
    @dls-dropdown-menu-border-radius-s
);
.cascaderPane-size(
    medium,
    @dls-option-font-size-m,
    @dls-dropdown-menu-max-height-m,
    @dls-option-padding-m,
    @dls-option-height-m,
    @dls-dropdown-menu-border-radius-m
);
.cascaderPane-size(
    large,
    @dls-option-font-size-l,
    @dls-dropdown-menu-max-height-l,
    @dls-option-padding-l,
    @dls-option-height-l, @dls-dropdown-menu-border-radius-l
);

@-moz-document url-prefix() {
    // https://bugzilla.mozilla.org/show_bug.cgi?id=1488080
    .@{cascader-pane-prefix-cls}::after {
        content: '';
        height: 0.01px;
        flex-shrink: 0;
    }
}
