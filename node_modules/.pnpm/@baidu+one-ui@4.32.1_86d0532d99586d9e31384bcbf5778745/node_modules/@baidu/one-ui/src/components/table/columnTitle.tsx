/**
 * @file column title
 * @author tangjinhua
 * @date 2021-09-17
 */

import React, {PureComponent, ReactElement, ReactNode} from 'react';
import Popover from '../popover';

interface ColumnTitleProps {
    title: ReactElement;
    desc: ReactNode;
};

export default class ColumnTitle extends PureComponent<ColumnTitleProps> {

    state = {
        showDesc: true
    };

    hide = () => {
        this.setState({
            showDesc: false
        });
    };

    show = () => {
        this.setState({
            showDesc: true
        });
    };

    render() {
        const {
            desc,
            title = null
        } = this.props;

        if (desc) {
            let content = desc;
            if (React.isValidElement(desc)) {
                content = React.cloneElement(desc, {hide: this.hide, show: this.show});
            }
            return (
                <Popover
                    content={content}
                    size="small"
                    overlayStyle={{display: this.state.showDesc ? '' : 'none'}}
                >
                    {title}
                </Popover>
            );
        }
        return title;
    }
}
