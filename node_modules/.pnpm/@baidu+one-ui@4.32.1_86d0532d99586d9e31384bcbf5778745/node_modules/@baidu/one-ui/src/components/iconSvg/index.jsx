import React from 'react';
import PropTypes from 'prop-types';
import omit from 'omit.js';
import {Consumer} from '../providerConfig/context';
import {formatCommonConfig, classnames} from '../../core/commonTools';
import {iconSvgMap} from '../../core/iconSvgTools';

export default function IconSvg(props) {
    const {className, suffixCls, type} = props;
    return (
        <Consumer>
            {
                consumerConfig => {
                    const {prefixCls} = formatCommonConfig(
                        {
                            ...props,
                            suffixCls
                        }, consumerConfig
                    );
                    const classString = classnames(
                        prefixCls,
                        `${prefixCls}-${type}`,
                        className
                    );
                    const Comp = iconSvgMap[type];
                    if (!Comp) {
                        return null;
                    }
                    return <Comp {...omit(props, ['type', 'prefixCls', 'suffixCls'])} className={classString} />;
                }
            }
        </Consumer>
    );
}

IconSvg.propTypes = {
    type: PropTypes.string.isRequired,
    className: PropTypes.string,
    prefixCls: PropTypes.string,
    suffixCls: PropTypes.string
};

IconSvg.defaultProps = {
    className: '',
    suffixCls: 'iconSvg'
};
