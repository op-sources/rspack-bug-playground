@import '../../style/index.less';
@import "../input/style.less";
@import '../../style/mixins/tipsAndError.less';

@cascader-prefix-cls: ~"@{one-prefix}-cascader";
@input-prefix-cls: ~"@{one-prefix}-input";
@loading-prefix-cls: ~"@{one-prefix}-loading";
@cascader-picker-width: 50 * @dls-padding-unit;

.cascader-size(
    @size,
    @font-size,
    @menu-height,
    @option-padding,
    @option-height,
    @menu-border-radius,
    @height,
    @tag-height,
    @border-radius
) {
    .@{cascader-prefix-cls}-@{size} {
        font-size: @font-size;
        border-radius: @border-radius;
        min-height: @height;
        .@{cascader-prefix-cls}-picker-main {
            min-height: @height - 2px;
        }
        .@{cascader-prefix-cls}-picker-icon {
            margin-bottom: calc(((@height - 2px - @dls-input-icon-size) / 2));
        }
        .@{cascader-prefix-cls}-picker-label {
            font-size: @font-size;
        }
        .@{cascader-prefix-cls}-picker-result {
            height: @tag-height;
            line-height: @tag-height;
        }
    }
    .@{cascader-prefix-cls}-menus-@{size} {
        border-radius: @menu-border-radius;
    }
    .@{cascader-prefix-cls}-menu-@{size} {
        height: @menu-height;
        .@{cascader-prefix-cls}-menu-item {
            padding: 0 @option-padding;
            height: @option-height;
            line-height: @option-height;
            font-size: @font-size;
            padding-right: @option-padding + 10px;
        }
    }
}

.@{cascader-prefix-cls} {
    .reset-component();
    &-picker-main {
        position: relative;
        flex: 1;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        overflow: hidden;
    }
    &-picker-before {
        flex-shrink: 0;
        margin-right: @dls-select-content-spacing;
    }
    &-picker-show-search &-input.@{input-prefix-cls} {
        position: relative;
    }
    &-input-measure {
        opacity: 0;
        position: absolute;
    }
    &-picker {
        .reset-component();
        vertical-align: middle;
        width: @cascader-picker-width;
        min-width: @cascader-label-min-width;
        padding: 0 @dls-select-padding-x;
        position: relative;
        cursor: pointer;
        background-color: @dls-input-background-color;
        border-radius: 0;
        outline: 0;
        transition: color 0.15s;
        display: inline-flex;
        align-items: center;
        &-label-container {
            display: inline;
            align-items: center;
            .@{cascader-prefix-cls}-search-split-icon {
                margin: 0 @dls-padding-unit;
            }
        }
        &-result {
            display: inline-flex;
            max-width: 100%;
            box-sizing: border-box;
            color: @dls-input-font-color;
            font-size: @dls-input-font-size-s;
            &-disabled {
                color: @dls-input-font-color-disabled;
                cursor: not-allowed;
            }
        }
        &-delete {
            margin-left: @dls-tag-content-spacing;
        }
        &-multiple &-result {
            padding: 0 @dls-padding-unit * 2;
            margin: @dls-select-tag-spacing - 1 @dls-select-tag-spacing @dls-select-tag-spacing - 1 0;
            background: @dls-background-color-neutral;
            border-radius: @dls-dropdown-menu-border-radius-m;
        }
        &-result-label {
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        .@{input-prefix-cls} {
            background-color: transparent!important;
            cursor: pointer;
            width: 100%;
            position: relative;
            border-width: 0;
            padding: 0;
            margin: -1px 0;
            &:focus {
                box-shadow: none!important;
            }
        }
        &-with-value {
            color: transparent;
            .@{cascader-prefix-cls}-picker-label {
                opacity: 0;
            }
        }
        &-disabled {
            cursor: not-allowed;
            background-color: @dls-input-background-color-disabled;
            color: @dls-input-font-color-disabled;
            border: 1px solid @dls-input-border-color-disabled;
            .@{cascader-prefix-cls}-picker-label,
            .@{cascader-prefix-cls}-picker-result {
                color: @dls-input-font-color-disabled;
            }
            .@{cascader-prefix-cls}-picker-arrow {
                cursor: not-allowed;
            }
            .@{cascader-prefix-cls}-input {
                .@{input-prefix-cls} {
                    cursor: not-allowed;
                }
            }
        }
        &-disabled &-placeholder {
            color: @dls-input-font-color-disabled;
        }
        .@{cascader-prefix-cls}-input,
        .@{cascader-prefix-cls}-input .@{input-prefix-cls}-detail {
            max-width: 100%;
            width: 100%;
        }
        .@{cascader-prefix-cls}-input-autosize,
        .@{cascader-prefix-cls}-input-autosize .@{input-prefix-cls}-detail {
            width: auto;
        }
        &-focused {
            color: @dls-input-placeholder-color;
        }
        &-label {
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
            color: @dls-input-font-color;
        }
        &-icon {
            width: @dls-input-icon-size;
            height: @dls-input-icon-size;
            flex-shrink: 0;
            align-self: flex-end;
            margin-left: @dls-select-content-spacing;
        }
        &-clear {
            opacity: 0;
            position: absolute;
            z-index: 2;
            color: @dls-input-icon-color;
            width: auto;
            height: @dls-input-icon-size !important;
            background-color: @dls-input-background-color;
            cursor: pointer;
            transition: color 0.3s ease, opacity 0.15s ease;
        }
        &:hover &-clear {
            opacity: 1;
        }
        &-arrow {
            position: absolute;
            z-index: 1;
            color: @dls-select-icon-color-aux;
            transition: transform .2s;
            width: auto;
            height:  @dls-input-icon-size !important;
            cursor: pointer;
            &&-expand {
                transform: rotate(180deg);
            }
        }
    }
    &-picker-small &-picker-clear,
    &-picker-small &-picker-arrow {
        right: @dls-select-padding-x;
    }
    &-picker-placeholder {
        color: @dls-input-placeholder-color;
        position: absolute;
        max-width: 100%;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
    }
    &-picker-placeholder * {
        color: @dls-input-placeholder-color;
    }
    &-menus {
        background: @dls-option-background-color;
        position: absolute;
        z-index: @cascader-zindex;
        border-radius: @dls-dropdown-menu-border-radius-l;
        overflow-y: auto;
        box-shadow: @dls-dropdown-menu-shadow;
        white-space: nowrap;
        &-empty,
        &-hidden {
            display: none;
        }
        .@{cascader-prefix-cls}-pane-menus {
            box-shadow: none;
            width: 100%;
        }
    }
}
.@{cascader-prefix-cls}-picker&:not(.@{cascader-prefix-cls}-picker-disabled) {
    border: 1px solid @dls-input-border-color;
    background-color: @dls-button-background-color-basic;
    color: @dls-input-font-color;
    cursor: pointer;
    &:hover, &:active {
        border-color: @dls-input-border-color-hover;
    }
    &.@{cascader-prefix-cls}-picker-focus {
        border-color: @dls-input-border-color-focus;
        box-shadow: @dls-input-shadow-focus;
    }
}

.cascader-size(
    small,
    @dls-input-font-size-s,
    @dls-dropdown-menu-max-height-s,
    @dls-cascader-option-padding-s,
    @dls-option-height-s,
    @dls-dropdown-menu-border-radius-s,
    @dls-input-height-s,
    @dls-select-tag-height-s,
    @dls-input-border-radius-s
);
.cascader-size(
    medium,
    @dls-input-font-size-m,
    @dls-dropdown-menu-max-height-m,
    @dls-cascader-option-padding-m,
    @dls-option-height-m,
    @dls-dropdown-menu-border-radius-m,
    @dls-input-height-m,
    @dls-select-tag-height-m,
    @dls-input-border-radius-m
);
.cascader-size(
    large,
    @dls-input-font-size-l,
    @dls-dropdown-menu-max-height-l,
    @dls-cascader-option-padding-l,
    @dls-option-height-l,
    @dls-dropdown-menu-border-radius-l,
    @dls-input-height-l,
    @dls-select-tag-height-l,
    @dls-input-border-radius-l
);
.one-invalid(~"@{cascader-prefix-cls}-picker");
