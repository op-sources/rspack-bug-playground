@import '../../style/index.less';
@import "../searchBox/style.less";
@import "../button/style.less";

@search-box-prefix-cls: ~"@{one-prefix}-search-box";
@dropdown-prefix-cls: ~"@{one-prefix}-dropdown";
@button-prefix-cls: ~"@{one-prefix}-button";

.dropdown-menu-size(@size, @height, @font-size, @dropdown-height, @padding, @input-height, @dropdown-border-radius) {
    .@{dropdown-prefix-cls}-menu-@{size} {
        .@{dropdown-prefix-cls}-menu-item,
        .@{dropdown-prefix-cls}-menu-submenu-title {
            height: @height;
            min-height: @height;
            line-height: @height;
            font-size: @font-size;
            padding: 0 @padding;
            padding-right: 6 * @dls-padding-unit;
        }
        .@{dropdown-prefix-cls}-menu-item {
            padding: 0;
            > span {
                padding: 0 @padding;
                box-sizing: border-box;
            }
        }
        .@{dropdown-prefix-cls}-search-item {
            > span {
                padding: 0;
            }
        }
        .@{dropdown-prefix-cls}-menu-item-group-title {
            line-height: @dls-option-group-label-line-height;
            font-size: @font-size;
            color: @dls-option-group-label-font-color;
            padding: @dls-option-group-label-padding-y @padding;
            padding-top: 2 * @dls-option-group-label-padding-y;
            display: flex;
            align-items: center;
        }
        .@{dropdown-prefix-cls}-menu,
        .@{dropdown-prefix-cls}-menu-vertical {
            max-height: @dropdown-height;
        }
    }
    .@{dropdown-prefix-cls}-menu-submenu-@{size} {
        .@{dropdown-prefix-cls}-menu-item,
        .@{dropdown-prefix-cls}-menu-submenu-title {
            height: @height;
            min-height: @height;
            line-height: @height;
            font-size: @font-size;
            padding: 0 @padding;
        }
        .@{dropdown-prefix-cls}-menu {
            border-radius: @dropdown-border-radius;
        }
    }
    .@{dropdown-prefix-cls}-transparent .@{dropdown-prefix-cls}-menu-@{size} {
        .@{dropdown-prefix-cls}-menu {
            border-radius: @dropdown-border-radius;
        }
    }
}

.dropdown-button-size(@size) {
    .@{dropdown-prefix-cls}-button-@{size} {
        .@{dropdown-prefix-cls}-arrow-down-icon {
            height: @dls-icon-size-aux;
            width: @dls-icon-size-aux;
            margin-left: @dls-dropdown-icon-spacing-aux;
        }
    }
    .@{dropdown-prefix-cls}-button-@{size}.@{dropdown-prefix-cls}-button-primary {
        .@{dropdown-prefix-cls}-arrow-down-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            margin-left: 0;
        }
    }
}

.dropdown-size(@size, @font-size, @dropdown-border-radius) {
    .@{dropdown-prefix-cls}-@{size} {
        .@{dropdown-prefix-cls}-header,
        .@{dropdown-prefix-cls}-footer {
            font-size: @font-size;
        }
        &:not(.@{dropdown-prefix-cls}-transparent) {
            border-radius: @dropdown-border-radius;
        }
    }
}

.@{dropdown-prefix-cls} {
    position: absolute;
    left: -9999px;
    top: -9999px;
    z-index: @dls-dropdown-z-index;
    display: block;
    &-header {
        padding: @dls-padding-unit * 3 @dls-padding-unit * 4;
        color: @dls-foreground-color-neutral-weak;
        font-size: @dls-font-size-1;
    }
    &-footer {
        padding: @dls-padding-unit * 3 @dls-padding-unit * 4;
        .@{button-prefix-cls} + .@{button-prefix-cls} {
            margin-left:  @dls-padding-unit * 4;
        }
    }
    &:not(&-transparent) {
        background-color: @dls-option-background-color;
        box-shadow: @dls-dropdown-menu-shadow;
        padding: @dls-option-group-padding-y 0;
        .@{dropdown-prefix-cls}-menu {
            box-shadow: none;
            border-radius: 0;
            padding: 0;
        }
    }
    &-wrap {
        position: relative;
        @{button-prefix-cls} > .@{dropdown-prefix-cls}-arrow-down-icon {
          font-size: @dls-dropdown-icon-size-aux;
        }
        .@{dropdown-prefix-cls}-arrow-down-icon:before {
          transition: transform .2s;
        }
    }
    &-wrap-open {
        .@{dropdown-prefix-cls}-arrow-down-icon:before {
            transform: rotate(180deg);
        }
    }
    &-hidden,
    &-menu-hidden,
    &-menu-submenu-hidden {
        display: none;
    }
    &-menu {
        outline: none;
        overflow: auto;
        position: relative;
        list-style-type: none;
        padding: 0;
        margin: 0;
        text-align: left;
        background-color: @dls-option-background-color;
        border-radius: 0;
        box-shadow: @dls-dropdown-menu-shadow;
        background-clip: padding-box;
        padding: @dls-option-group-padding-y 0;
        &-submenu {
            .@{dropdown-prefix-cls}-menu-submenu-right-icon {
                font-size: @dls-icon-size-normal;
                position: absolute;
                top: 50%;
                right: 2 * @dls-padding-unit;
                transform: translateY(-50%);
                transition: transform 0.3s ease-in-out;
            }
        }
        &-submenu-open {
            .@{dropdown-prefix-cls}-menu-submenu-title {
                background-color: @dls-option-background-color-selected-parent;
                // font-weight: @dls-option-font-weight-selected-parent;
                color: @dls-option-font-color-hover;
            }
        }
        &-submenu-open&:not(&-submenu-vertical) {
            font-weight: @dls-option-font-weight-selected-parent;
        }
        &-submenu-popup {
            position: absolute;
            z-index: @dls-dropdown-z-index;
            > .@{dropdown-prefix-cls}-menu {
              transform-origin: 0 0;
            }
        }
        &-item,
        &-submenu-title {
            margin: 0;
            clear: both;
            white-space: nowrap;
            cursor: pointer;
            transition: all .3s;
            position: relative;
            > .anticon:first-child {
                min-width: @dls-icon-size-normal;
                margin-right: 2 * @dls-padding-unit;
            }
            .option-color-normal();
            &-active {
                background-color: @dls-option-background-color-focus;
            }
            &-selected,
            &-selected > a {
                .option-color-normal-selected();
            }
            &-disabled {
                .option-color-normal-disabled();
            }
            &-divider {
                height: 1px;
                overflow: hidden;
                background-color: @dls-option-group-separator-color;
                margin: @dls-option-group-padding-y 0;
            }
            .@{dropdown-prefix-cls}-menu-submenu-arrow {
                position: absolute;
                right: @dls-padding-unit;
                &-icon {
                    font-style: normal;
                    color: @dls-option-icon-color-aux;
                    font-size: @dls-option-icon-size-aux;
                }
            }
        }
        && &-item-empty {
            background-color: transparent;
            cursor: text;
            text-align: center;
            display: flex;
            align-items: center;
            height: auto;
        }
        &-item-span {
            display: inline-block;
            height: 100%;
            width: 100%;
        }
        &-submenu-vertical {
            position: relative;
        }
        &-submenu-vertical > & {
            top: 0;
            left: 100%;
            position: absolute;
            min-width: 100%;
            margin-left: @dls-padding-unit;
            transform-origin: 0 0;
        }
        &-submenu&-submenu-disabled .@{dropdown-prefix-cls}-menu-submenu-title {
            &,
            .@{dropdown-prefix-cls}-menu-submenu-arrow-icon {
                color: @dls-option-icon-color-aux-disabled;
            }
        }
        .@{search-box-prefix-cls}-container {
            box-sizing: border-box;
            height: 100%;
            .@{search-box-prefix-cls}-detail {
                border-color: transparent;
                top: -3px;
                border-bottom: 1px solid @dls-input-border-color;
                box-sizing: border-box;
                border-radius: 0;
                .@{search-box-prefix-cls}-icon-close {
                    opacity: 0;
                    display: inline;
                }
                .@{search-box-prefix-cls}-icon-close-show {
                    opacity: 1;
                    display: inline;
                }
            }
        }
        .@{search-box-prefix-cls}-container-focused {
            .@{search-box-prefix-cls}-detail {
                border-color: transparent;
                box-shadow: none;
                border-bottom: 2px solid @dls-input-border-color-focus;
            }
        }
        .@{search-box-prefix-cls} {
            border-top: 1px solid transparent;
            border-left: 1px solid transparent;
            border-right: 1px solid transparent;
            border-radius: 0;
            &:hover, &:focus, &:active {
                border-top: 1px solid transparent;
                border-left: 1px solid transparent;
                border-right: 1px solid transparent;
            }
        }
    }
    &.slide-down-enter.slide-down-enter-active&-placement-bottomLeft,
    &.slide-down-appear.slide-down-appear-active&-placement-bottomLeft,
    &.slide-down-enter.slide-down-enter-active&-placement-bottomCenter,
    &.slide-down-appear.slide-down-appear-active&-placement-bottomCenter,
    &.slide-down-enter.slide-down-enter-active&-placement-bottomRight,
    &.slide-down-appear.slide-down-appear-active&-placement-bottomRight {
        @animation-name: oneUISlideUpInEffect;
    }
    &.slide-up-enter.slide-up-enter-active&-placement-topLeft,
    &.slide-up-appear.slide-up-appear-active&-placement-topLeft,
    &.slide-up-enter.slide-up-enter-active&-placement-topCenter,
    &.slide-up-appear.slide-up-appear-active&-placement-topCenter,
    &.slide-up-enter.slide-up-enter-active&-placement-topRight,
    &.slide-up-appear.slide-up-appear-active&-placement-topRight {
        animation-name: oneUISlideDownInEffect;
  }

    &.slide-down-leave.slide-down-leave-active&-placement-bottomLeft,
    &.slide-down-leave.slide-down-leave-active&-placement-bottomCenter,
    &.slide-down-leave.slide-down-leave-active&-placement-bottomRight {
        animation-name: oneUISlideUpOutEffect;
    }

    &.slide-up-leave.slide-up-leave-active&-placement-topLeft,
    &.slide-up-leave.slide-up-leave-active&-placement-topCenter,
    &.slide-up-leave.slide-up-leave-active&-placement-topRight {
        animation-name: oneUISlideDownOutEffect;
    }
}
.@{dropdown-prefix-cls}-button {
    position: relative;
    text-align: left;
    .@{dropdown-prefix-cls}-button-arrow-down-icon {
        transition: transform 0.3s ease-in-out;
        right: @dls-dropdown-split-button-padding-x;
        transform-origin: center;
        margin-left: @dls-dropdown-icon-spacing-aux;
        transform: rotate(0deg);
        color: @dls-dropdown-icon-color-aux-normal;
        font-size: @dls-dropdown-icon-size-aux;
    }
    > span {
        display: inline-flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
    }
    &-primary-container {
        display: flex;
        .@{dropdown-prefix-cls}-button-primary {
            &:before {
                content: "";
                display: inline-flex;
            }
        }
        .@{button-prefix-cls}.focus-visible {
            z-index: 1;
        }
        .@{dropdown-prefix-cls}-button-primary.@{button-prefix-cls}-primary {
            &:before {
                position: absolute;
                bottom: 50%;
                left: -1px;
                transform: translateY(50%);
                width: 1px;
                height: calc(100% + 2px);
                background-color: fade(@dls-button-font-color-primary, 15%);
            }
        }
        .@{dropdown-prefix-cls}-button-primary.@{button-prefix-cls}-normal {
            &:before {
                position: absolute;
                bottom: 50%;
                left: -1px;
                transform: translateY(50%);
                width: 1px;
                height: calc(100% + 2px);
                background-color: fade(@dls-button-font-color-normal, 15%);
            }
        }
        .@{dropdown-prefix-cls}-button-primary.@{button-prefix-cls}-primary-disabled {
            &:before {
                background-color: fade(@dls-button-font-color-primary-disabled, 15%);
            }
        }
        .@{dropdown-prefix-cls}-button-primary.@{button-prefix-cls}-normal-disabled {
            &:before {
                background-color: fade(@dls-button-font-color-normal-disabled, 15%)
            }
        }
        > button:first-of-type {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            margin-right: -1px;
            float: left;
            justify-content: left;
        }
        &-item {
            float: right;
            > button {
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
                .@{dropdown-prefix-cls}-button-arrow-down-icon {
                    margin-left: 0;
                    color: @dls-dropdown-icon-color-aux-primary;
                }
            }
        }
    }
}

.@{dropdown-prefix-cls}-button:not(.@{dropdown-prefix-cls}-normal) {
    .@{dropdown-prefix-cls}-button-arrow-down-icon {
        color: currentColor;
    }
}

.dropdown-menu-size(xsmall, @dls-option-height-xs, @dls-option-font-size-xs, @dls-dropdown-menu-max-height-xs, @dls-option-padding-xs, @dls-input-height-xs, @dls-dropdown-menu-border-radius-xs);
.dropdown-menu-size(small, @dls-option-height-s, @dls-option-font-size-s, @dls-dropdown-menu-max-height-s, @dls-option-padding-s, @dls-input-height-s, @dls-dropdown-menu-border-radius-s);
.dropdown-menu-size(medium, @dls-option-height-m, @dls-option-font-size-m, @dls-dropdown-menu-max-height-m, @dls-option-padding-m, @dls-input-height-m, @dls-dropdown-menu-border-radius-m);
.dropdown-menu-size(large, @dls-option-height-l, @dls-option-font-size-l, @dls-dropdown-menu-max-height-l, @dls-option-padding-l, @dls-input-height-l, @dls-dropdown-menu-border-radius-l);

.dropdown-button-size(xsmall);
.dropdown-button-size(small);
.dropdown-button-size(medium);
.dropdown-button-size(large);

.dropdown-size(xsmall, @dls-option-font-size-xs, @dls-dropdown-menu-border-radius-xs);
.dropdown-size(small, @dls-option-font-size-s, @dls-dropdown-menu-border-radius-s);
.dropdown-size(medium, @dls-option-font-size-m, @dls-dropdown-menu-border-radius-m);
.dropdown-size(large, @dls-option-font-size-l, @dls-dropdown-menu-border-radius-l);

.@{dropdown-prefix-cls}-button-open {
    .@{dropdown-prefix-cls}-button-arrow-down-icon {
        transform: rotate(180deg);
    }
}

.@{dropdown-prefix-cls}-button-textLink.@{button-prefix-cls}-link-disabled {
    color: @dls-link-font-color-normal-disabled;
}


.@{dropdown-prefix-cls}-button-containers {
    display: inline-block;
    .@{dropdown-prefix-cls}-trigger {
        display: inline-flex;
        justify-content: center;
        align-items: center;
    }
}

.@{dropdown-prefix-cls}-button.@{button-prefix-cls}-normal-disabled {
    .@{dropdown-prefix-cls}-button-arrow-down-icon {
        color: @dls-dropdown-icon-color-aux-normal-disabled;
    }
}

.@{dropdown-prefix-cls}-button-primary.@{button-prefix-cls}-primary-disabled {
    .@{dropdown-prefix-cls}-button-arrow-down-icon {
        color: @dls-dropdown-icon-color-aux-primary-disabled;
    }
}