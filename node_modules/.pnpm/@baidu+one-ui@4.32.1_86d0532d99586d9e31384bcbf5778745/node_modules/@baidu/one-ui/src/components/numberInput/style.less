@import '../../style/index.less';
@import '../../style/mixins/tipsAndError.less';

@numberbox-prefix-cls: ~"@{one-prefix}-number-input";
@numberbox-prefix-cls-wrapper: ~"@{numberbox-prefix-cls}-wrapper";
@numberbox-prefix-cls-wrapper-strong: ~"@{numberbox-prefix-cls-wrapper}-strong";
@numberbox-prefix-cls-wrapper-basic: ~"@{numberbox-prefix-cls-wrapper}-basic";
@numberbox-prefix-cls-main: ~"@{numberbox-prefix-cls}-main";
@numberbox-prefix-cls-main-addon: ~"@{numberbox-prefix-cls-main}-addon";
@numberbox-prefix-cls-tip: ~"@{numberbox-prefix-cls}-tip";
@popover-inner-contnet: ~"@{one-prefix}-popover-inner-content";

.number-box-input-height(@height) {
    input {
        height: @height - 2px;
    }
}
.number-box-main-size(@width, @border-radius, @font-size) {
    .@{numberbox-prefix-cls-main} {
        .@{numberbox-prefix-cls} {
            border-radius: @border-radius;
            width: @width;
        }
    }
    .@{numberbox-prefix-cls}-tail-label {
        font-size: @font-size;
    }
}

.number-box-size(@type, @height, @width, @border-radius, @font-size, @spin-width) {
    .@{numberbox-prefix-cls}-@{type} {
        .input-size-style(@font-size, @border-radius, @height);
        .number-box-input-height(@height);
        .number-box-main-size(@width, @border-radius, @font-size);
        .@{numberbox-prefix-cls}-spin-buttons-container {
            width: @spin-width;
        }
        .@{numberbox-prefix-cls} {
            height: @height;
            input {
                font-size: @font-size;
            }
        }
        .@{numberbox-prefix-cls}-main-addon {
            > span {
                height: @height - 2px;
                >svg {
                    font-size: @dls-number-input-spin-icon-size-strong;
                    color: @dls-icon-color-aux;
                }
            }
        }
    }
    .@{numberbox-prefix-cls-tip}-layer-@{type} {
        .@{popover-inner-contnet} {
            font-size: @font-size;
        }
    }
}

.number-box-adpter-color(@background-color, @color) {
    background: @background-color;
    color: @color;
}

.number-box-strong-adpter-size(@type, @size, @border-radius) {
    .@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls}-@{type} {
        .@{numberbox-prefix-cls-main} {
            .@{numberbox-prefix-cls-main-addon} {
                height: @size;
                line-height: @size;
                width: @size;
            }
            .@{numberbox-prefix-cls-main-addon}:first-of-type {
                border-top-left-radius: @border-radius;
                border-bottom-left-radius: @border-radius;
            }
            .@{numberbox-prefix-cls-main-addon}:last-of-type {
                border-top-right-radius: @border-radius;
                border-bottom-right-radius: @border-radius;
            }
        }
    }
}

.@{numberbox-prefix-cls} {
    position: relative;
    width: 100%;
    .input-color-normal-style();
    display: flex;
    flex: 1 1 auto;
    align-items: center;
    padding: 0 @dls-input-padding;
    overflow: hidden;
    user-select: none;
    input {
        width: 100%;
        text-align: left;
        outline: 0;
        background-color: transparent;
        border: 0;
        padding: 0;
        color: @dls-input-font-color;
        .placeholder(@dls-input-placeholder-color);
    }
    .@{numberbox-prefix-cls}-spin-buttons-container {
        border-left: 1px solid @dls-button-border-color-basic;
        opacity: 0;
        margin-left: 3 * @dls-padding-unit;
        position: absolute;
        right: 0;
        height: 100%;
        >.@{numberbox-prefix-cls}-icon-disabled {
            cursor: not-allowed;
            color: @dls-button-font-color-text-disabled;
            background-color: @dls-button-background-color-basic-disabled;
            &:hover,
            &:focus,
            &:active,
            &.focus-visible {
                color: @dls-button-font-color-text-disabled;
                background-color: @dls-button-background-color-basic-disabled;
            }
        }
        > button {
            height: 50%;
            display: block;
            width: 100%;
            text-align: center;
            outline: none;
            border-radius: 0;
            .number-box-adpter-color(@dls-button-background-color-basic, @dls-button-font-color-text);
            &:hover {
                .number-box-adpter-color(@dls-button-background-color-basic-hover, @dls-button-font-color-text-hover);
            }
            &:focus,
            &:active {
                .number-box-adpter-color(@dls-button-background-color-basic-active, @dls-button-font-color-text-active);
            }
        }

        >svg {
            font-size: @dls-number-input-spin-icon-size-normal;
            height: @dls-number-input-spin-icon-size-normal;
            color: @dls-icon-color-aux;
        }
        // .number-box-icon-disabled-style();
    }
    .@{numberbox-prefix-cls}-spin-buttons-container-focus {
        opacity: 1;
    }
    &-affix {
        color: @dls-input-placeholder-color;
        flex-shrink: 0;
    }
    &-prefix {
        margin-right: @dls-input-content-spacing;
    }
    &-suffix {
        margin-left: @dls-input-content-spacing;
    }
}

.number-box-size(xsmall, @dls-number-input-height-xs, @dls-number-input-width-normal-xs, @dls-input-border-radius-xs, @dls-input-font-size-xs, @dls-number-input-spin-button-width-normal-xs);
.number-box-size(small, @dls-number-input-height-s, @dls-number-input-width-normal-s, @dls-input-border-radius-s, @dls-input-font-size-s, @dls-number-input-spin-button-width-normal-s);
.number-box-size(medium, @dls-number-input-height-m, @dls-number-input-width-normal-m, @dls-input-border-radius-m, @dls-input-font-size-m, @dls-number-input-spin-button-width-normal-m);

.@{numberbox-prefix-cls}-focus {
    // 会被hover覆盖，所以这里加上important
    border-color: @dls-input-border-color-focus !important;
    box-shadow: @dls-shadow-focus;
}

.@{numberbox-prefix-cls}-tail-label {
    color: @dls-button-font-color-text !important;
    margin-left: @dls-padding-unit;
}

.@{numberbox-prefix-cls}-readonly,
.@{numberbox-prefix-cls}-disabled {
    .input-color-disabled-style();
    input {
        cursor: not-allowed;
    }
    .@{numberbox-prefix-cls}-spin-buttons-container {
        display: none;
    }
}
.@{numberbox-prefix-cls}-readonly {
    .input-color-readonly-style();
    input {
        cursor: text;
    }
}

.@{numberbox-prefix-cls-wrapper} {
    display: inline-block;
    line-height: 1;
    position: relative;
    .@{numberbox-prefix-cls-tip}-layer {
        color: @dls-button-font-color-text;
    }
    * {
        box-sizing: border-box !important;
    }
    &-basic:not(&-disabled):not(&-readonly) .@{numberbox-prefix-cls}-with-spin:hover,
    &-basic&-focus:not(&-disabled):not(&-readonly) .@{numberbox-prefix-cls}-with-spin {
        .@{numberbox-prefix-cls}-suffix{
            display: none;
        }
    }
    .@{numberbox-prefix-cls-main} {
        display: inline-block;
        &:hover .@{numberbox-prefix-cls}-spin-buttons-container {
            opacity: 1;
        }
        .@{numberbox-prefix-cls-main-addon} {
            display: inline-block;
            border: 1px solid @dls-button-border-color-basic;
            border-radius: 0;
            vertical-align: top;
            text-align: center;
            cursor: pointer;
            position: relative;
            background-color: transparent;
            &:hover {
                background-color: @dls-button-background-color-basic-hover;
            }
            &:active {
                background-color: @dls-button-background-color-basic-active;
            }
            span {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
        }
        .@{numberbox-prefix-cls-main-addon}-before {
            border: 0;
            border-right: 1px solid @dls-input-border-color;
        }
        .@{numberbox-prefix-cls-main-addon}-after {
            border: 0;
            border-left: 1px solid @dls-input-border-color;
        }
        // .number-box-icon-disabled-style();
    }
}

.@{numberbox-prefix-cls-wrapper-strong} {
    display: flex;
    flex: 1 1 auto;
    align-items: center;
    .@{numberbox-prefix-cls}-main {
        display: flex;
        border: 1px solid @dls-input-border-color;
        &:hover {
            border-color: @dls-input-border-color-hover;
        }
        .@{numberbox-prefix-cls} {
            width: @dls-number-input-strong-input-width;
            border-radius: 0;
            border: none;
            &:hover {
                border: none;
            }
        }
        .@{numberbox-prefix-cls}-focus {
            border: none;
            box-shadow: none;
        }
    }
    .@{numberbox-prefix-cls}-spin-buttons-container {
        display: none !important;
    }
}

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls-wrapper}-disabled {
    .@{numberbox-prefix-cls}-main {
        border: 1px solid @dls-input-border-color-disabled;
        &:hover {
            border-color: @dls-input-border-color-disabled;
        }
    }
}

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls-wrapper}-focus {
    .@{numberbox-prefix-cls}-main {
        border-color: @dls-input-border-color-focus;
        box-shadow: @dls-shadow-focus;
    }
}

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls}-small {
    .@{numberbox-prefix-cls}-main {
        border-radius: @dls-input-border-radius-s;
        input {
            height: @dls-input-height-s;
        }
    }
}

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls}-xsmall {
    .@{numberbox-prefix-cls}-main {
        border-radius: @dls-input-border-radius-xs;
        input {
            height: @dls-input-height-xs;
        }
    }
}

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls}-medium {
    .@{numberbox-prefix-cls}-main {
        border-radius: @dls-input-border-radius-m;
        input {
            height: @dls-input-height-m;
        }
    }
}

.number-box-strong-adpter-size(medium, @dls-number-input-height-m, @dls-input-border-radius-m);
.number-box-strong-adpter-size(small, @dls-number-input-height-s, @dls-input-border-radius-s);
.number-box-strong-adpter-size(xsmall, @dls-number-input-height-xs, @dls-input-border-radius-s);

.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls-wrapper}-readonly,
.@{numberbox-prefix-cls-wrapper-strong}.@{numberbox-prefix-cls-wrapper}-disabled {
    .@{numberbox-prefix-cls-main-addon} {
        border-color: @dls-input-border-color-disabled;
        background-color: @dls-button-background-color-basic-disabled;
        color: @dls-button-font-color-basic-disabled;
        &:hover, &.focus-visible, &:active {
            border-color: @dls-input-border-color-disabled;
            background-color: @dls-button-background-color-basic-disabled;
            color: @dls-button-font-color-basic-disabled;
        }
        cursor: not-allowed;
    }
}

.@{numberbox-prefix-cls-wrapper-basic} {
    .@{numberbox-prefix-cls-main-addon} {
        display: none !important;
    }
}
.common-tips-and-error(@numberbox-prefix-cls);
.one-invalid(@numberbox-prefix-cls, @numberbox-prefix-cls-wrapper);