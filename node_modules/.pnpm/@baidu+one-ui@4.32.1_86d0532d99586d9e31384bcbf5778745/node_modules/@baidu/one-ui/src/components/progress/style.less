@import "../../style/themes/default.less";
@import "../../style/mixins/index.less";

@progress-prefix-cls: ~'@{one-prefix}-progress';

.status-color(@color) {
    .@{progress-prefix-cls}-text {
        color: @color;
    }
    .@{progress-prefix-cls}-bg {
        background-color: @color;
    }
    .@{progress-prefix-cls}-circle-path {
        stroke: @color;
    }
}

.@{progress-prefix-cls} {
    .bar-size(@size, @font-size, @bar-width, @bar-radius) {
        &-@{size}&-line &-text,
        &-@{size}&-line &-operation {
            font-size: @font-size;
        }
        &-@{size}&-line &-bg,
        &-@{size}&-line &-inner {
            border-radius: @bar-radius;
        }
        &-@{size}&-line &-outer {
            width: @bar-width;
        }
    }
    display: inline-block;
    &-line {
        position: relative;
        width: 100%;
    }
    &-line &-close-circle-icon,
    &-line &-check-circle-icon,
    &-line &-operation > svg {
        font-size: @dls-progress-icon-size-bar;
    }
    &-line &-text {
        display: inline-flex;
        align-items: center;
        max-width: @dls-progress-line-text-max-width;
        margin-left: @dls-progress-track-spacing-bar;
        color: @dls-progress-font-color;
        white-space: nowrap;
        text-align: left;
        vertical-align: middle;
        word-break: normal;
    }
    &-line &-operation {
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        max-width: @dls-progress-line-operation-max-width;
        margin-left: @dls-progress-icon-spacing-bar;
        color: @dls-progress-font-color;
        white-space: nowrap;
        text-align: left;
        vertical-align: middle;
        word-break: normal;
    }
    &-line &-outer {
        box-sizing: content-box;
    }
    &-line &-inner {
        background-color: @dls-progress-track-color;
        width: 100%;
    }
    &-line &-bg {
        position: relative;
        background-color: @dls-progress-indicator-color;
    }
    .bar-size(
        xsmall,
        @dls-progress-font-size-xs,
        @dls-progress-width-bar-xs,
        @dls-progress-border-radius-xs
    );
    .bar-size(
        small,
        @dls-progress-font-size-s,
        @dls-progress-width-bar-s,
        @dls-progress-border-radius-s
    );
    .bar-size(
        medium,
        @dls-progress-font-size-m,
        @dls-progress-width-bar-m,
        @dls-progress-border-radius-m
    );
    &-outer {
        box-sizing: border-box;
        display: inline-block;
        @show-info-offset: @dls-progress-line-text-max-width + @dls-progress-icon-spacing-bar;
        @show-operation-offset: @dls-progress-line-operation-max-width + @dls-progress-icon-spacing-bar;
        .@{progress-prefix-cls}-show-info & {
            margin-right: -@show-info-offset;
            padding-right: @show-info-offset;
        }
        .@{progress-prefix-cls}-show-operation & {
            margin-right: -@show-operation-offset;
            padding-right: @show-operation-offset;
        }
        .@{progress-prefix-cls}-show-info.@{progress-prefix-cls}-show-operation & {
            margin-right: -@show-info-offset - @show-operation-offset;
            padding-right: @show-info-offset + @show-operation-offset;
        }
    }

    &-inner {
        position: relative;
        display: inline-block;
        vertical-align: middle;
    }

    &-bg-transition {
        transition: all .3s @ease-out-circ;
    }

    .circle-size(@size, @font-size, @icon-size, @circle-size) {
        &-@{size}&-circle &-text {
            font-size: @font-size;
        }
        &-@{size}&-circle &-close-icon,
        &-@{size}&-circle &-check-icon {
            font-size: @icon-size;
        }
        &-@{size}&-circle &-inner {
            width: @circle-size;
            height: @circle-size;
        }
    }

    .circle-size(
        xsmall,
        @dls-progress-font-size-circular-xs,
        @dls-progress-icon-size-circular-xs,
        @dls-progress-size-circular-xs
    );
    .circle-size(
        small,
        @dls-progress-font-size-circular-s,
        @dls-progress-icon-size-circular-s,
        @dls-progress-size-circular-s
    );
    .circle-size(
        medium,
        @dls-progress-font-size-circular-m,
        @dls-progress-icon-size-circular-m,
        @dls-progress-size-circular-m
    );

    &-circle-trail {
        stroke: @dls-progress-track-color;
    }

    &-circle-path {
        stroke: @dls-progress-indicator-color;
    }

    &-circle &-text {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        margin: 0;
        padding: 0;
        color: @dls-progress-font-color;
        line-height: 1;
        white-space: normal;
        text-align: center;
        transform: translate(-50%, -50%);
        > span {
            display: inline-flex;
            align-items: center;
        }
        .@{progress-prefix-cls}-close-icon,
        .@{progress-prefix-cls}-check-icon {
            width: auto;
        }
    }

    &&-status-exception {
        .status-color(@dls-progress-indicator-color-error);
    }

    &&-status-success {
        .status-color(@dls-progress-indicator-color-success);
    }
}
