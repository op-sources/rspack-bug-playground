@import '../../style/index.less';
@import '../../components/overlay/style.less';

@nav-prefix-cls: ~"@{one-prefix}-nav";
@overlay-prefix-cls: ~"@{one-prefix}-overlay";

.nav-item-style(@color, @backgroundColor) {
    color: @color;
    background-color: @backgroundColor;
}

.@{nav-prefix-cls} {
    border: 0;
    box-shadow: none;
    z-index: 0;
    white-space: nowrap;
    display: flex;
    outline: none;
    list-style: none;
    margin: 0;
    padding: 0;
    height: @dls-menu-item-height-horizontal-m;
    line-height: @dls-menu-item-height-horizontal-m;
    box-sizing: border-box;
    font-size: @dls-menu-font-size-horizontal-m;
    position: relative;
    .@{overlay-prefix-cls}-open:not(&-overflow-indicator) {
        > .@{nav-prefix-cls}-item-arrow-down {
            transform: rotate(-180deg);
            transform-origin: center;
            transition: transform 0.2s;
        }
        &.@{nav-prefix-cls}-item {
            .nav-item-style(@dls-menu-item-font-color-horizontal-hover, @dls-menu-item-background-color-horizontal-hover);
        }
        &.@{nav-prefix-cls}-item-selected {
            .nav-item-style(@dls-menu-item-font-color-horizontal-current-hover, @dls-menu-item-background-color-horizontal-current-hover);
        }
    }

    .@{overlay-prefix-cls}-close:not(&-overflow-indicator) {
        > .@{nav-prefix-cls}-item-arrow-down {
            transform: rotate(0);
            transform-origin: center;
            transition: transform 0.2s;
        }
    }

    &-item {
        padding: 0 @dls-menu-item-padding-x-horizontal;
        outline: none;
        cursor: pointer;
        transition: color 0.2s ease-out;
        text-decoration: none;
        align-items: center;
        .nav-item-style(@dls-menu-item-font-color-horizontal, @dls-menu-item-background-color-horizontal);
        &:hover {
            .nav-item-style(@dls-menu-item-font-color-horizontal-hover, @dls-menu-item-background-color-horizontal-hover);
            .@{nav-prefix-cls}-item-text {
                color: @dls-color-brand-6;
                &:after {
                    width: @dls-padding-unit * 3;
                    margin-left: -@dls-padding-unit * 1.5;
                }
            }
        }

        &.focus-visible {
            .nav-item-style(@dls-menu-item-font-color-horizontal-focus, @dls-menu-item-background-color-horizontal-focus);
            &:after {
                background-color: @dls-menu-indicator-color-focus;
            }
        }

        &:active {
            .nav-item-style(@dls-menu-item-font-color-horizontal-active, @dls-menu-item-background-color-horizontal-active);
            .@{nav-prefix-cls}-item-text {
                color: @dls-color-brand-8;
                &:after {
                    width: @dls-padding-unit * 9;
                    margin-left: -@dls-padding-unit * 4.5;
                    background-color: @dls-color-brand-8;
                }
            }
        }
        &-text {
            position: relative;
            &:after {
                content: '';
                left: 50%;
                position: absolute;
                height: 3px;
                bottom: 0px;
                transition: background-color 0.2s ease-out, width 0.2s, margin-left 0.2s;
                border-radius: 1.5px;
                z-index: 1;
            }
        }
        &-arrow-down, &-arrow-right {
            color: @dls-color-gray-9;
            font-size: @dls-icon-size-aux;
            margin-left: @dls-menu-item-spacing;
        }
    }
    &-item-selected {
        .nav-item-style(@dls-menu-item-font-color-horizontal-current, @dls-menu-item-background-color-horizontal-current);
        color: @dls-color-brand-7;
        font-weight: @dls-menu-item-font-weight-current;
        &:hover {
            .nav-item-style(@dls-menu-item-font-color-horizontal-current-hover, @dls-menu-item-background-color-horizontal-current-hover);
            .@{nav-prefix-cls}-item-text {
                color: @dls-color-brand-6;
                &:after {
                    width: @dls-padding-unit * 7;
                    margin-left: -@dls-padding-unit * 3.5;
                    background-color: @dls-color-brand-6;
                }
            }
        }

        &.focus-visible {
            .nav-item-style(@dls-menu-item-font-color-horizontal-current-focus, @dls-menu-item-background-color-horizontal-current-focus);
            &:after {
                background-color: @dls-menu-indicator-color-focus;
            }
        }
        &:active {
            .nav-item-style(@dls-menu-item-font-color-horizontal-current-active, @dls-menu-item-background-color-horizontal-current-active);
            .@{nav-prefix-cls}-item-text {
                color: @dls-color-brand-8;
                &:after {
                    width: @dls-padding-unit * 9;
                    margin-left: -@dls-padding-unit * 4.5;
                    background-color: @dls-color-brand-8;
                }
            }
        }
        .@{nav-prefix-cls}-item-text {
            color: @dls-color-brand-7;
            &:after {
                width: @dls-padding-unit * 7;
                margin-left: -@dls-padding-unit * 3.5;
                background-color: @dls-color-brand-7;
            }
        }
    }
    &-item-disabled {
        cursor: not-allowed;
        .nav-item-style(@dls-menu-item-font-color-horizontal-disabled, @dls-menu-item-background-color-horizontal-disabled);
        &:hover {
            .nav-item-style(@dls-menu-item-font-color-horizontal-disabled, @dls-menu-item-background-color-horizontal-disabled);
            .@{nav-prefix-cls}-item-text {
                color: @dls-menu-item-font-color-horizontal-disabled;
                &:after {
                    display: none;
                }
            }
            
        }
        &.focus-visible {
            .nav-item-style(@dls-menu-item-font-color-horizontal-disabled, @dls-menu-item-background-color-horizontal-disabled);
            .@{nav-prefix-cls}-item-text {
                color: @dls-menu-item-font-color-horizontal-disabled;
                &:after {
                    display: none;
                }
            }
        }
        &:active {
            .nav-item-style(@dls-menu-item-font-color-horizontal-disabled, @dls-menu-item-background-color-horizontal-disabled);
            .@{nav-prefix-cls}-item-text {
                color: @dls-menu-item-font-color-horizontal-disabled;
                &:after {
                    display: none;
                }
            }
        }
    }
    &-overflow-menus {
        .@{nav-prefix-cls}-item {
            font-size: @dls-option-font-size-m;
            height: @dls-padding-unit * 9;
            line-height: @dls-padding-unit * 9;
            max-width: @dls-option-max-width-m;
            padding: 0 @dls-padding-unit * 7;
            text-align: left;
            color: @dls-option-font-color;
            background-color: @dls-option-background-color;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            display: block;
            &:after {
                display: none;
            }
            &:hover {
                color: @dls-color-brand-6;
                background-color: @dls-option-background-color-hover;
                .@{nav-prefix-cls}-item-arrow-right {
                    color: @dls-color-brand-6;
                }
            }
            &.focus-visible {
                color: @dls-option-font-color-focus;
                background-color: @dls-option-background-color-focus;
            }
            &:active {
                color: @dls-color-brand-8;
                background-color: @dls-option-background-color-active;
                .@{nav-prefix-cls}-item-arrow-right {
                    color: @dls-color-brand-8;
                }
            }
        }
        .@{nav-prefix-cls}-overflow-item-disabled {
            cursor: not-allowed;
            color: @dls-option-font-color-disabled;
            background-color: @dls-option-background-color;
            &:hover, &.focus-visible, &:active {
                color: @dls-option-font-color-disabled;
                background-color: @dls-option-background-color;
            }
        }
        .@{nav-prefix-cls}-overflow-item-selected {
            color: @dls-option-font-color-selected;
            &:hover {
                color: @dls-option-font-color-selected-hover;
            }
            &.focus {
                color: @dls-option-font-color-selected-focus;
            }
            &:active {
                color: @dls-option-font-color-selected-active;
            }
        }
    }
    &-overflow-indicator {
        &:hover {
            color: @dls-color-brand-6;
        }
        &:active {
            color: @dls-color-brand-8;
        }
        &:after {
            display: none;
        }
    }
    &-ink {
        position: absolute;
        bottom: 0;
        &-inner {
            width: @dls-padding-unit * 3;
            transform: scaleX(0);
            border-bottom: 3px solid @dls-color-brand-6;
            border-radius: 1.5px;
        }
        &-animate-left {
            .@{nav-prefix-cls}-ink-inner {
                transform: scaleX(1);
            }
            transition: left 0.2s;
        }
        &-animate-width {
            .@{nav-prefix-cls}-ink-inner {
                transform: scaleX(1);
                transition: transform 0.2s;
            }
        }
    }
}

.@{nav-prefix-cls}-overlay {
    padding: @dls-menu-card-padding-y @dls-menu-card-padding-x !important;
    background-color: @dls-menu-card-background-color !important;
    border-radius: @dls-menu-card-border-radius-m !important;
}
.@{nav-prefix-cls}-overlay-overflow-menus {
    padding: @dls-padding-unit * 3 0 !important;
    background-color: @dls-menu-card-background-color !important;
    border-radius: @dls-menu-card-border-radius-m !important;
}