import React, {useContext} from 'react';
import {classnames} from '../../core/commonTools';
import {FormFieldGroupProps} from './interface';
import {FormContext} from './context';

/**
 * @visibleName FormFieldGroup
 */
export const FormFieldGroup = ({
    children,
    className,
    prefixCls,
    layout,
    labelAlign,
    labelPosition,
    density,
    size,
    ...props
}: FormFieldGroupProps) => {
    const formContext = useContext(FormContext);
    return (
        <FormContext.Provider value={{...formContext, labelAlign, labelPosition}}>
            <div
                className={
                    classnames(
                        `${prefixCls}-field-group`,
                        className,
                        `${prefixCls}-${layout}`,
                        `${prefixCls}-${size}`,
                        `${prefixCls}-type-${density}`,
                        {
                            [`${prefixCls}-label-position-${labelPosition}`]: labelPosition
                        }
                    )
                }
                {...props}
            >
                {children}
            </div>
        </FormContext.Provider>
    );
};

FormFieldGroup.defaultProps = {
    prefixCls: 'one-form',
    layout: 'default',
    labelAlign: 'left',
    labelPosition: 'side',
    density: 'compact'
};

export default FormFieldGroup;
