import React, {PureComponent} from 'react';
import {withConfigConsumer} from '../providerConfig/context';
import Checkbox from './checkbox';
import Context, {CheckboxGroupContext} from './context';
import {CheckboxButtonProps} from './interface';

@withConfigConsumer('checkbox-button')
class CheckboxButton extends PureComponent<CheckboxButtonProps> {
    static defaultProps = {
        prefixCls: 'one-checkbox-button'
    };

    render() {
        return (
            <Context.Consumer>
                {context => this.renderCheckbox(context)}
            </Context.Consumer>
        );
    }

    renderCheckbox(context: CheckboxGroupContext) {
        const {
            type,
            ...props
        } = this.props;
        const buttonType = type || context?.type || 'strong';
        return (
            <Checkbox {...props} mode="strong" buttonType={buttonType} />
        );
    }
}

export default CheckboxButton;
